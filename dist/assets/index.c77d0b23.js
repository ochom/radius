var ha=Object.defineProperty,pa=Object.defineProperties;var fa=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable;var rt=(a,n,l)=>n in a?ha(a,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[n]=l,u=(a,n)=>{for(var l in n||(n={}))Ct.call(n,l)&&rt(a,l,n[l]);if(Ve)for(var l of Ve(n))Dt.call(n,l)&&rt(a,l,n[l]);return a},g=(a,n)=>pa(a,fa(n));var wt=(a,n)=>{var l={};for(var s in a)Ct.call(a,s)&&n.indexOf(s)<0&&(l[s]=a[s]);if(a!=null&&Ve)for(var s of Ve(a))n.indexOf(s)<0&&Dt.call(a,s)&&(l[s]=a[s]);return l};var we=(a,n,l)=>(rt(a,typeof n!="symbol"?n+"":n,l),l);import{a as Ne,c as ba,j as t,B as A,b as e,N as zt,C as Ae,u as mt,r as b,t as Lt,d as ht,A as Ut,T as jt,I as it,M as ga,e as D,f as lt,g as ya,h as xa,i as va,k as Na,l as te,m as _t,n as G,S as E,F as M,o as Je,p as Sa,q as he,L as Ca,s as $,v as q,w as J,x as C,y as ue,z as Da,D as wa,E as ze,G as Ia,Q as pt,H as Gt,J as ka,K as H,O as le,P as Fe,R as Te,U as ee,V as fe,W as Q,X as V,Y as Z,Z as Ye,_ as ge,$ as pe,a0 as Ue,a1 as be,a2 as Ie,a3 as ke,a4 as $e,a5 as F,a6 as ne,a7 as U,a8 as $a,a9 as Ta,aa as Pa,ab as Ba,ac as Se,ad as ct,ae as _e,af as Ge,ag as Oe,ah as je,ai as nt,aj as Xe,ak as ce,al as qa,am as st,an as Le,ao as dt,ap as ae,aq as ft,ar as Aa,as as Yt,at as Re,au as et,av as He,aw as tt,ax as Ht,ay as at,az as re,aA as Qt,aB as Kt,aC as Vt,aD as Zt,aE as Ea,aF as Jt,aG as Oa,aH as Fa,aI as Ra,aJ as bt,aK as gt,aL as yt,aM as xt,aN as Xt,aO as ut,aP as Ma,aQ as It,aR as Wa,aS as za,aT as La,aU as Ua,aV as ja,aW as _a,aX as Ga,aY as Ya,aZ as Ha,a_ as Qa,a$ as Ka,b0 as Va,b1 as Za,b2 as Ja}from"./vendor.d704b74f.js";const Xa=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function l(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=l(r);fetch(r.href,o)}};Xa();const vt="https://radius-backend.herokuapp.com";let We=vt+"/api/v1/";const Ee=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`}),ot={Ok:200},Ce={GRAPH:`${vt}/query`,LOAD_USER:`${We}load-user`,LOGIN:`${We}login`,REGISTER:`${We}register`,STUDENT_PASSPORT:`${We}upload/student-passport`,STAFF_PASSPORT:`${We}upload/teacher-passport`,BOOK_COVER:`${We}upload/book-cover`},er=async a=>{let n={Authorization:`Bearer ${a}`};return Ne({method:"GET",url:Ce.LOAD_USER,headers:n}).then(l=>l).catch(l=>l)},tr=async a=>Ne({method:"POST",url:Ce.LOGIN,data:a}).then(n=>({status:n.status,data:n.data,message:"Registration successful"})).catch(n=>{var s;return{message:((s=n.response)==null?void 0:s.data)||n}}),ea=ba({name:"counter",initialState:{user:null},reducers:{login:(a,n)=>{var l;localStorage.setItem("token",((l=n.payload)==null?void 0:l.token)||null),a.user=n.payload},logout:a=>{localStorage.removeItem("token"),a.user=null}}}),{login:ta,logout:ar}=ea.actions;var rr=ea.reducer,lr="/assets/profile.5a8a9370.jpg";function nr(){return t(A,{sx:{position:"fixed",bottom:"1rem",right:"1rem"},children:["\xA9 ",new Date().getFullYear()," Lysofts Ke"]})}function xe({titleIcon:a,titleName:n,items:l}){return t("div",{className:"sub_menu",children:[t("div",{className:"title_content",children:[e("i",{className:a}),e("span",{children:n})]}),e("ul",{children:l.map((s,r)=>e("li",{children:t(zt,{exact:s.exact,to:s.href,replace:!0,activeClassName:"selected",children:[e("i",{className:s.icon}),e("span",{children:s.title})]})},r))})]})}function sr(a){const{user:n,toggleSideNav:l}=a,[s,r]=Lt.useState(null);let o=ht();const v=x=>{r(x.currentTarget)},f=()=>{r(null)},p=[{title:"Profile",action:f},{title:"Account",action:f},{title:"Logout",action:()=>{o(ar())}}];return e(A,{className:"topbar",children:e(Ut,{position:"static",sx:{backgroundColor:"white"},children:t(jt,{children:[e(it,{size:"large",edge:"start",color:"secondary","aria-label":"menu",sx:{mr:2},onClick:l,children:e(ga,{})}),e(D,{variant:"h6",component:"div",sx:{flexGrow:1,color:"#9c27b0"},children:n.school.name}),t(A,{children:[e(lt,{badgeContent:0,color:"secondary",sx:{mr:3},children:e(ya,{color:"action"})}),e(lt,{badgeContent:0,showZero:!0,color:"secondary",sx:{mr:3},children:e(xa,{color:"action"})}),e(lt,{badgeContent:0,showZero:!0,color:"secondary",sx:{mr:3},children:e(va,{color:"action"})}),e(Na,{title:"Open settings",arrow:!0,children:e(it,{onClick:v,children:e(te,{alt:n.firstName,src:lr})})}),e(_t,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(s),onClose:f,children:p.map(x=>e(G,{onClick:x.action,children:e(D,{textAlign:"center",children:x.title})},x.title))})]})]})})})}function oe({children:a}){return e(A,{className:"page_body",sx:{position:"absolute",mt:"3px",height:"calc(100vh - 65px)",overflowY:"auto"},children:e(Ae,{sx:{my:5,top:0},children:a})})}const or=[{href:"/",icon:"bx bx-grid-alt",title:"Dashboard",tooltip:"Dashboard",exact:!0},{href:"/sms",icon:"bx bx-chat",title:"SMS",tooltip:"Messages"},{href:"/teachers",icon:"bx bx-user",title:"Teachers",tooltip:"Teachers"},{href:"/classes",icon:"bx bxs-school",title:"Classrooms",tooltip:"Classrooms"},{href:"/students",icon:"bx bx-group",title:"Students",tooltip:"Students"},{href:"/examination",icon:"bx bxs-graduation",title:"Examination",tooltip:"Examination"},{href:"/finance",icon:"bx bx-money",title:"Finance",tooltip:"Finance"},{href:"/library",icon:"bx bx-book-open",title:"Library",tooltip:"Library"},{href:"/activity",icon:"bx bx-trophy",title:"Activity",tooltip:"Activity"},{href:"/welfare",icon:"bx bxs-hotel",title:"Welfare",tooltip:"Welfare"},{href:"/settings",icon:"bx bx-cog",title:"Settings",tooltip:"Settings"}];function ir(a){const{active:n}=a;return t("div",{className:`sidebar${n?" activated":""}`,children:[e("div",{className:"logo_content",children:t("div",{className:"logo",children:[e("i",{className:"bx bxl-sketch"}),e("div",{className:"logo_name",children:"Radius"})]})}),e("ul",{className:"nav_list",children:or.map((l,s)=>t("li",{children:[t(zt,{exact:l.exact,activeClassName:"selected",to:l.href,replace:!0,children:[e("i",{className:l.icon}),e("span",{className:"links_name",children:l.title})]}),e("span",{className:"tooltip",children:l.tooltip})]},s))})]})}const cr=a=>{const{children:n}=a,l=mt(v=>v.auth.user),[s,r]=b.exports.useState(!1),o=()=>{r(!s)};return t(Lt.Fragment,{children:[e(ir,{active:s}),t("div",{className:"home_content",children:[e(sr,{user:l,toggleSideNav:o}),n,e(nr,{})]})]})},ie=({message:a})=>t(E,{className:"network-error",children:[e(A,{className:"svg"}),t(A,{children:[e(D,{color:"secondary",variant:"h4",align:"center",children:"Oops!"}),e(D,{align:"center",children:a})]})]}),Me=({feature:a})=>t(E,{className:"module-building",children:[e(A,{className:"svg"}),t(A,{children:[t(D,{color:"secondary",variant:"h4",align:"center",children:[a," Feature Coming Soon"]}),t(A,{sx:{py:2},children:[e(D,{align:"center",children:"If you want to check in on the development, you are welcome to contribute."}),t(D,{align:"center",children:["Call Us: ",e("b",{children:"+254708113456"})," or  Email Us: ",e("b",{children:"developers@lysofts.co.ke"})]})]})]})]}),dr=[{title:"Exams",href:"/examination",icon:"bx bxs-right-arrow",exact:!0},{title:"Exam Type",href:"/examination/exam-types",icon:"bx bxs-right-arrow"},{title:"Subject Groups",href:"/examination/subject-groups",icon:"bx bxs-right-arrow"},{title:"Subjects",href:"/examination/subjects",icon:"bx bxs-right-arrow"},{title:"Grades",href:"/examination/grades",icon:"bx bxs-right-arrow"},{title:"Subject Grading",href:"/examination/grades",icon:"bx bxs-right-arrow"},{title:"Exam Grading",href:"/examination/grades",icon:"bx bxs-right-arrow"}];function ur(){return t(M,{children:[e(xe,{titleName:"Examination",titleIcon:"bx bxs-graduation",items:dr}),e(oe,{children:e(Me,{feature:"Examination"})})]})}const mr=[{title:"Dashboard",href:"/activity",icon:"bx bxs-right-arrow",exact:!0},{title:"Events",href:"/activity/books",icon:"bx bxs-right-arrow"},{title:"Clubs and Societies",href:"/activity/borrrows",icon:"bx bxs-right-arrow"},{title:"Games",href:"/activity/borrows-teacher",icon:"bx bxs-right-arrow"}];function hr(){return t(M,{children:[e(xe,{titleName:"Activity",titleIcon:"bx bx-trophy",items:mr}),e(oe,{children:e(Me,{feature:"Activities"})})]})}const aa={open:!1,message:"Hello world",severity:"success"},Y=a=>{Je.fire(u({icon:"success",title:"Done!",text:"Request successful",showConfirmButton:!0,timer:3e3},a))},j=a=>{Je.fire(u({icon:"error",title:"Error!",text:"Request failed",showConfirmButton:!0,confirmButtonText:"Try again"},a))},ye=a=>{Je.fire(u({icon:"warning",title:"Notice!",showConfirmButton:!0,confirmButtonText:"Ok",confirmButtonColor:"#9c27b0"},a))},Pe=a=>Je.fire(u({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#9c27b0",cancelButtonColor:"#bababa",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel"},a)),ra=a=>{const{open:n,severity:l,message:s,onClose:r}=a;return e(Sa,{open:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:6e3,onClose:r,children:e(he,{severity:l,sx:{width:"100%"},variant:"filled",children:s})})},pr={email:"",password:""},fr=a=>{let{toggleForm:n}=a;const l=ht(),[s,r]=b.exports.useState(!1),[o,v]=b.exports.useState(pr);return e("div",{className:"login-card mx-auto",children:t("div",{className:"card card-body p-5 border-0",children:[t("h3",{className:"text-center my-4",children:[e(Ca,{color:"secondary",sx:{fontSize:"2rem"}})," Login"]}),t("form",{onSubmit:i=>{i.preventDefault(),r(!0),tr(o).then(p=>{p.status===200?(r(!1),l(ta(p.data))):(r(!1),j({text:p.message}))}).catch(p=>{r(!1)})},children:[e("div",{className:"col-12 mt-4",children:e($,{type:"text",label:"Email",color:"secondary",fullWidth:!0,required:!0,value:o.email,onChange:i=>v(g(u({},o),{email:i.target.value}))})}),e("div",{className:"col-12 mt-4",children:e($,{type:"password",label:"Password",color:"secondary",fullWidth:!0,required:!0,value:o.password,onChange:i=>v(g(u({},o),{password:i.target.value}))})}),e("div",{className:"row mt-3",children:e("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e(q,{color:"secondary",className:"no-transform",children:"Forgot password?"})})}),e("div",{className:"row mt-3 mb-4 px-2",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:s,children:e(D,{children:"Login"})})}),e("div",{className:"row mt-3",children:e(q,{type:"button",color:"secondary",onClick:n,children:"Don't have account?"})})]})]})})},br=["Bronze","Silver","Gold","Platinum"],kt=a=>{const[n,l]=b.exports.useState("Gold");return t("div",{className:"py-5",children:[e("h3",{className:"text-center my-4",children:"Select a package"}),e(C,{children:e(E,{direction:"row",sx:{display:"flex",justifyContent:"center"},children:br.map(s=>e(ue,{sx:{mx:2},children:t(C,{sx:{py:5,px:5,justifyContent:"center"},children:[e(D,{variant:"h6",sx:{textAlign:"center"},children:s}),e(C,{sx:{mt:3},children:t("ul",{style:{listStyle:"none",marginLeft:"-2rem"},children:[e("li",{children:"Lorem"}),e("li",{children:"Sit amet dolar"}),e("li",{children:"Lorem twaf twa "}),e("li",{children:"Lorem"})]})}),e("div",{className:"d-flex justify-content-center",children:e(q,{onClick:()=>l(s),color:"secondary",variant:"contained",disabled:n===s,sx:{mt:10},children:n===s?"Selected":"Select"})})]})},s))})})]})},gr={firstName:"",lastName:"",phoneNumber:"",email:"",password:"",schoolName:"",schoolAlias:"",agreedToTerms:!1},$t=a=>{let{toggleForm:n}=a;const[l,s]=b.exports.useState(!1),[r,o]=b.exports.useState(gr);return e("div",{className:"col-md-6 mx-auto",children:t("div",{className:"card card-body p-5 border-0",children:[e("h3",{className:"text-center my-4",children:"Your profile"}),t("form",{onSubmit:f=>{if(f.preventDefault(),!r.agreedToTerms){ye({text:"You MUST agree to Lysofts terms and conditions"});return}s(!0),a.register(r).then(i=>{i.status===200?Y({text:i.message}):j({text:i.message})}).finally(()=>{s(!1)})},children:[t("div",{className:"row",children:[e("div",{className:"col-6 my-3",children:e($,{type:"text",label:"First name",fullWidth:!0,required:!0,value:r.firstName,onChange:f=>o(g(u({},r),{firstName:f.target.value}))})}),e("div",{className:"col-6 my-3",children:e($,{type:"text",label:"Last name",fullWidth:!0,required:!0,value:r.lastName,onChange:f=>o(g(u({},r),{lastName:f.target.value}))})}),e("div",{className:"col-12 my-3",children:e($,{type:"text",label:"Phone number",fullWidth:!0,required:!0,value:r.phoneNumber,onChange:f=>o(g(u({},r),{phoneNumber:f.target.value}))})}),e("div",{className:"col-12 my-3",children:e($,{type:"email",label:"Email",fullWidth:!0,required:!0,value:r.email,onChange:f=>o(g(u({},r),{email:f.target.value}))})}),e("div",{className:"col-12 my-3",children:e($,{type:"password",label:"Create password",fullWidth:!0,required:!0,value:r.password,onChange:f=>o(g(u({},r),{password:f.target.value}))})}),e("div",{className:"d-grid",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:l,children:"Register"})})]}),e("div",{className:"row my-3",children:e(q,{type:"button",color:"secondary",onClick:n,children:"Already have account?"})})]})]})})},yr={schoolName:"",schoolAlias:""},Tt=a=>{const[n,l]=b.exports.useState(yr);return e("div",{className:"col-md-6 mx-auto",children:t("div",{className:"card card-body p-5 border-0",children:[e("h3",{className:"text-center my-4",children:"School Profile"}),e("form",{onSubmit:r=>{if(r.preventDefault(),!n.agreedToTerms){ye({text:"You MUST agree to Lysofts terms and conditions"});return}a.register(n).then(o=>{o.status===200?Y({text:o.message}):j({text:o.message})})},children:t("div",{className:"row",children:[e("div",{className:"col-12 my-3",children:e($,{type:"text",label:"School name",placeholder:"e.g Akala Secondary School",fullWidth:!0,required:!0,value:n.schoolName,onChange:r=>l(g(u({},n),{schoolName:r.target.value}))})}),e("div",{className:"col-12 my-3",children:e($,{type:"text",label:"Alias (Abbreviation)",placeholder:"e.g AKSS",fullWidth:!0,required:!0,value:n.schoolAlias,onChange:r=>l(g(u({},n),{schoolAlias:r.target.value}))})})]})})]})})},xr=[{title:"About",href:"#about"},{title:"Pricing",href:"#pricing"},{title:"Contact Us",href:"#contacts"}],vr=()=>t(A,{children:[e(Ut,{position:"fixed",sx:{backgroundColor:"white"},children:e(Ae,{children:t(jt,{children:[t(D,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:"flex",flexGrow:1,color:"#9c27b0"},children:[e(D,{sx:{fontSize:"1.5rem",mr:1},children:e("i",{className:"bx bxl-sketch"})}),"Radius 360\xB0"]}),e(A,{sx:{flexGrow:1,display:"flex"},children:xr.map(a=>e(q,{href:a.href,color:"secondary",sx:{my:2,mr:2,display:"block"},children:a.title},a.title))}),t(A,{children:[e(q,{color:"secondary",className:"no-transform",sx:{mr:3},href:"#login",children:"Sign in"}),e(q,{variant:"outlined",color:"secondary",className:"no-transform",sx:{mr:3},href:"#contacts",children:"Talk to sales"}),e(q,{variant:"contained",color:"secondary",className:"no-transform",href:"#register",children:"Try for free"})]})]})})}),e("section",{id:"about"}),e("section",{className:"landing-section py-5",id:"login",children:e(Ae,{children:t("div",{className:"row col-12",children:[e("div",{className:"col-md-6 col-lg-7",children:t("div",{className:"about",children:[t("div",{children:[e(D,{variant:"h4",color:"GrayText",children:"Welcome to"}),e(D,{color:"secondary",variant:"h1",sx:{mb:4,fontSize:"3rem",fontWeight:700},children:"Radius 360\xB0"})]}),e(D,{variant:"body2",color:"grey",sx:{fontSize:"1.5rem",fontWeight:500},children:"Manage Examinations, Finances, Students and Library."}),e(D,{color:"secondary",variant:"h4",mt:1,children:"Anywhere, Anytime"})]})}),e("div",{className:"col-md-6 col-lg-5",children:e(fr,{})})]})})}),e("section",{id:"register",className:"registration-section",children:t(Ae,{children:[e(kt,{}),e(Tt,{}),e($t,{})]})}),e("section",{id:"contacts",className:"registration-section",children:t(Ae,{children:[e(kt,{}),e(Tt,{}),e($t,{})]})}),e("section",{id:"footer",className:"footer-section",children:e(Ae,{})})]});class z{constructor(){we(this,"getData",async n=>{let l=Ee();return Ne({method:"POST",url:Ce.GRAPH,headers:l,data:n}).then(s=>s.data.data).catch(s=>null)});we(this,"createOrUpdate",async n=>{let l=Ee();return Ne({method:"POST",url:Ce.GRAPH,headers:l,data:n}).then(s=>{let r=s.data;var o={};return r.errors?o={message:r.errors[0].message}:o={status:ot.Ok,message:"Request completed successfully",data:r.payload},o}).catch(s=>{var v;let r=s.response.data;var o={};return r.errors?o={message:r.errors[0].message}:o={message:((v=s.response)==null?void 0:v.data)||s},o})});we(this,"uploadStudentPassPort",async n=>{let l=Ee(),s=u({"Content-Type":"multipart"},l);return Ne({method:"POST",url:Ce.GRAPH,headers:s,data:n}).then(r=>{var f;let o=r.data;var v;return o.errors?v={message:(f=o.errors[0])==null?void 0:f.message}:v={status:ot.Ok,message:"Request completed successfully",data:o.payload},v}).catch(r=>{var v;return{message:((v=r.response)==null?void 0:v.data)||r}})});we(this,"delete",async n=>{let l=Ee();return Ne({method:"POST",url:Ce.GRAPH,headers:l,data:n}).then(s=>{var v;let r=s.data;var o;return r.errors?o={message:(v=r.errors[0])==null?void 0:v.message}:o={status:ot.Ok,message:"Request completed successfully",data:r.payload},o}).catch(s=>{var o;return{message:((o=s.response)==null?void 0:o.data)||s}})})}}function Be(a){const{options:n,row:l}=a,[s,r]=b.exports.useState(null),o=Boolean(s),v=i=>{r(i.currentTarget)},f=()=>{r(null)};return t("div",{children:[e(it,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":o?"true":void 0,onClick:v,children:e(Da,{})}),e(_t,{id:"basic-menu",anchorEl:s,open:o,onClose:f,MenuListProps:{"aria-labelledby":"basic-button"},children:(n||[]).map(i=>t(G,{onClick:p=>{f(),i.action(l)},children:[e(wa,{children:i.icon}),e(ze,{children:i.title})]},i.title))})]})}const L=()=>e("div",{className:"py-5 d-flex justify-content-center",children:e(Ia,{size:60,color:"#4e0c8b",stroke:3,duration:1e3})}),la=e(ka,{style:{color:"grey",marginLeft:"5px"}}),na={indeterminate:a=>a},sa={headRow:{style:{border:"none"}},headCells:{style:{color:"#202124",fontSize:"14px"}},rows:{highlightOnHoverStyle:{backgroundColor:"#4e0c8b1c",borderBottomColor:"#FFFFFF",borderRadius:"15px",outline:"1px solid #FFFFFF"}},pagination:{style:{border:"none"}}};function me(a){return e(pt,u({progressComponent:e(L,{}),pagination:!0,customStyles:sa,selectableRowsComponent:Gt,selectableRowsComponentProps:na,sortIcon:la,highlightOnHover:!0,pointerOnHover:!0},a))}function Nr(a){let{handleSearch:n}=a;return e(pt,u({progressComponent:e(L,{}),pagination:!0,subHeader:!0,subHeaderComponent:e(A,{sx:{my:2,display:"flex",justifyContent:"end"},children:e($,{label:"Search",size:"small",placeholder:"Search ...",onChange:n})}),customStyles:sa,selectableRowsComponent:Gt,selectableRowsComponentProps:na,sortIcon:la,highlightOnHover:!0,pointerOnHover:!0},a))}const Sr=H`
  query classrooms{
    classrooms: getClassrooms{
      id
      curriculum
      level
      stream
      classTeacher{
        id
        title
        fullName
      }
    }
    teachers: getTeachers{
      id
      title
      fullName
    }
  }
`,Pt={curriculum:"",level:"",stream:"",classTeacherID:""},Cr={"8-4-4":[...[1,2,3,4,5,6,7,8].map(a=>`Class ${a}`),...[1,2,3,4].map(a=>`Form ${a}`),...[1,2,3,4].map(a=>`Year ${a}`)],"2-6-6-3":[...[1,2].map(a=>`PP ${a}`),...[1,2,3,4,5,6,7,8,9,10,11,12].map(a=>`Grade ${a}`),...[1,2,3].map(a=>`Year ${a}`)]};function Dr(){const{data:a,loading:n,error:l,refetch:s}=le(Sr),[r,o]=b.exports.useState(!1),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(!1),[x,d]=b.exports.useState(null),[h,S]=b.exports.useState(Pt),N=()=>o(!r),y=()=>{N(),d(null),S(Pt)},m=c=>{c.preventDefault(),f(!0);let I=x?{query:`mutation ($id: ID!, $data: NewClassroom!){
        updateClassroom(id: $id, input: $data)
     }`,variables:{id:x,data:h}}:{query:`mutation ($data: NewClassroom!){
        createClassroom(input: $data)
      }`,variables:{data:h}};new z().createOrUpdate(I).then(B=>{B.status===200?(Y({text:"Classroom saved successfully"}),N(),s()):j({text:B.message})}).finally(()=>{f(!1)})},P=c=>{d(c.id),p(!0);let I={query:`query ($id: ID!){
        classroom: getClassroom(id: $id){
          id
          curriculum
          level
          stream
          classTeacher{
            id
            title
            fullName
          }
        }
      }`,variables:{id:c.id}};new z().getData(I).then(B=>{if(B){let O=B.classroom;S({curriculum:O.curriculum,level:O.level,stream:O.stream,classTeacherID:O.classTeacher.id})}}).finally(()=>{p(!1)}),N()};let W=[{title:"Edit",action:P,icon:e(pe,{fontSize:"small"})},{title:"Delete",action:c=>{Pe({title:"Delete classroom!"}).then(I=>{if(I.isConfirmed){let B={query:`mutation ($id: ID!){
            deleteClassroom(id: $id)
          }`,variables:{id:c.id}};new z().delete(B).then(O=>{O.status===200?(Y({text:"Classroom deleted successfully"}),s()):j({text:O.message})})}else I.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, classroom not deleted"})})},icon:e(Ue,{fontSize:"small",color:"red"})}];const _=[{name:"Curriculum",selector:c=>c.curriculum,sortable:!0},{name:"Level",selector:c=>c.level,sortable:!0},{name:"Stream",selector:c=>c.stream,sortable:!0},{name:"Class Teacher",selector:c=>c.classTeacher},{selector:c=>c.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}];return n?e(L,{}):l?e(ie,{message:l.message}):t(M,{children:[e(C,{sx:{mb:3,display:"flex",justifyContent:"end"},children:t(q,{color:"secondary",variant:"contained",className:"no-transform",onClick:y,children:[e(Fe,{})," Add New Classroom"]})}),e(me,{defaultSortFieldId:1,columns:_,onRowClicked:P,data:a.classrooms.map(c=>({id:c.id,curriculum:c.curriculum,level:c.level,stream:c.stream,classTeacher:`${c.classTeacher.title} ${c.classTeacher.fullName}`,action:e(Be,{options:W,row:c})}))}),e(Te,{isOpen:r,children:i?e(ee,{children:e(L,{})}):t("form",{onSubmit:m,method:"post",children:[e(fe,{toggle:N,children:t("span",{children:[e("i",{className:`fa fa-${x?"edit":"plus-circle"}`})," ",x?"Edit classroom details":"Create a new classroom"]})}),e(ee,{children:t("div",{className:"row px-3",children:[e("div",{className:"mt-3",children:t(Q,{fullWidth:!0,children:[e(V,{id:"curriculum-label",children:"Curriculum"}),t(Z,{labelId:"curriculum-label",id:"curriculum",label:"Curriculum",color:"secondary",required:!0,fullWidth:!0,value:h.curriculum,onChange:c=>S(g(u({},h),{curriculum:c.target.value})),children:[e(G,{value:"8-4-4",children:"8-4-4"}),e(G,{value:"2-6-6-3",children:"2-6-6-3"})]})]})}),e("div",{className:"mt-4",children:t(Q,{fullWidth:!0,children:[e(V,{id:"curriculum-label",children:"Level"}),e(Z,{labelId:"level-label",id:"level",label:"Level",color:"secondary",required:!0,fullWidth:!0,value:h.level,onChange:c=>S(g(u({},h),{level:c.target.value})),children:(Cr[h.curriculum]||[]).map(c=>e(G,{value:c,children:c},c))})]})}),e("div",{className:"mt-4",children:e($,{label:"Stream",color:"secondary",placeholder:"(optional)",fullWidth:!0,value:h.stream,onChange:c=>S(g(u({},h),{stream:c.target.value}))})}),e("div",{className:"mt-4",children:t(Q,{fullWidth:!0,children:[e(V,{id:"teacher-label",children:"Class Teacher"}),e(Z,{labelId:"teacher-label",id:"teacher",label:"Class Teacher",color:"secondary",required:!0,fullWidth:!0,value:h.classTeacherID,onChange:c=>S(g(u({},h),{classTeacherID:c.target.value})),children:a.teachers.map(c=>t(G,{value:c.id,children:[c.title," ",c.fullName]},c.id))})]})})]})}),e(Ye,{children:e("div",{className:"col-12 d-flex justify-content-start ps-4",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:v,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})})]})})]})}const wr=H`
  query{
    sessions:getSessions{
      id
      academicYear
      curriculum
      system
      name
      startDate
      endDate
    }
  }
`,Bt={curriculum:"",academicYear:202,system:"",name:"",startDate:new Date,endDate:new Date};function Ir(){const{data:a,loading:n,error:l,refetch:s}=le(wr),[r,o]=b.exports.useState(!1),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(!1),[x,d]=b.exports.useState(null),[h,S]=b.exports.useState(Bt),N=()=>o(!r),y=()=>{N(),d(null),S(Bt)},m=c=>{c.preventDefault(),p(!0);let I=x?{query:`mutation($id: ID!, $data: NewSession!){
          updateSession(id: $id, input: $data)
        }`,variables:{id:x,data:h}}:{query:`mutation($data: NewSession!){
          createSession(input: $data)
        }`,variables:{data:h}};new z().createOrUpdate(I).then(B=>{B.status===200?(Y({text:"Session saved successfully"}),s(),N()):j({text:B.message})}).finally(()=>{p(!1)})},P=c=>{d(c.id),f(!0);let I={query:`query ($id: ID!){
        session: getSession(id: $id){
          id
          academicYear
          curriculum
          system
          name
          startDate
          endDate
        }
      }`,variables:{id:c.id}};new z().getData(I).then(B=>{if(B){let O=B.session;S({curriculum:O.curriculum,academicYear:O.academicYear,system:O.system,name:O.name,startDate:O.startDate,endDate:O.endDate})}}).finally(()=>{f(!1)}),N()};let W=[{title:"Edit",action:P,icon:e(pe,{fontSize:"small"})},{title:"Delete",action:c=>{Pe({title:"Delete session!"}).then(I=>{if(I.isConfirmed){let B={query:`mutation ($id: ID!){
            deleteSession(id: $id)
          }`,variables:{id:c.id}};new z().delete(B).then(O=>{O.status===200?(Y({text:"Session deleted successfully"}),s()):j({text:O.message})})}else I.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, session not deleted"})})},icon:e(Ue,{fontSize:"small",color:"red"})}];const _=[{name:"Academic Year",selector:c=>c.academicYear,sortable:!0},{name:"Curriculum",selector:c=>c.curriculum,sortable:!0},{name:"Name",selector:c=>c.name,sortable:!0},{name:"Start Date",selector:c=>c.startDate,sortable:!0},{name:"End Date",selector:c=>c.endDate,sortable:!0},{selector:c=>c.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}];return n?e(L,{}):l?e(ie,{message:l.message}):t(M,{children:[e(C,{sx:{mb:3,display:"flex",justifyContent:"end"},children:t(q,{color:"secondary",variant:"contained",className:"no-transform",onClick:y,children:[e(Fe,{})," Add New Session"]})}),e(me,{columns:_,onRowClicked:P,data:a.sessions.map(c=>({id:c.id,academicYear:c.academicYear,curriculum:c.curriculum,name:c.name,startDate:be(c.startDate).format("Do MMMM, YYYY"),endDate:be(c.endDate).format("Do MMMM, YYYY"),action:e(Be,{options:W,row:c})}))}),e(Te,{isOpen:r,children:v?e(ee,{children:e(L,{})}):t("form",{onSubmit:m,method:"post",children:[e(fe,{toggle:N,children:t("span",{children:[e("i",{className:`fa fa-${x?"edit":"plus-circle"}`})," ",x?"Edit session details":"Create a new session"]})}),e(ee,{children:t("div",{className:"row px-3",children:[e("div",{className:"mt-4",children:e($,{type:"number",label:"Academic Year",color:"secondary",fullWidth:!0,value:h.academicYear,onChange:c=>S(g(u({},h),{academicYear:+c.target.value}))})}),e("div",{className:"mt-3",children:t(Q,{fullWidth:!0,children:[e(V,{id:"curriculum-label",children:"Curriculum"}),t(Z,{labelId:"curriculum-label",id:"curriculum",label:"Curriculum",color:"secondary",required:!0,fullWidth:!0,value:h.curriculum,onChange:c=>S(g(u({},h),{curriculum:c.target.value})),children:[e(G,{value:"8-4-4",children:"8-4-4"}),e(G,{value:"2-6-6-3",children:"2-6-6-3"})]})]})}),e("div",{className:"mt-4",children:t(Q,{fullWidth:!0,children:[e(V,{id:"system-label",children:"System"}),e(Z,{labelId:"system-label",id:"system",label:"System",color:"secondary",required:!0,fullWidth:!0,value:h.system,onChange:c=>S(g(u({},h),{system:c.target.value})),children:["Term","Semester"].map(c=>e(G,{value:c,children:c},c))})]})}),e("div",{className:"mt-4",children:t(Q,{fullWidth:!0,children:[e(V,{id:"session-label",children:"Session Name"}),e(Z,{labelId:"session-label",id:"session",label:"Session Name",color:"secondary",required:!0,fullWidth:!0,value:h.name,onChange:c=>S(g(u({},h),{name:c.target.value})),children:(h.system.length>0?[1,2,3]:[]).map(c=>e(G,{value:h.system+" "+c,children:h.system+" "+c},c))})]})}),e("div",{className:"mt-4",children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Start Date",inputFormat:"DD/MM/yyyy",value:h.startDate,onChange:c=>S(g(u({},h),{startDate:c})),renderInput:c=>e($,u({fullWidth:!0},c))})})}),e("div",{className:"mt-4",children:e(Ie,{dateAdapter:ke,children:e($e,{label:"End Date",inputFormat:"DD/MM/yyyy",value:h.endDate,onChange:c=>S(g(u({},h),{endDate:c})),renderInput:c=>e($,u({fullWidth:!0},c))})})})]})}),e(Ye,{children:e("div",{className:"col-12 d-flex justify-content-start ps-4",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:i,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})})]})})]})}const kr=[{title:"Classrooms",href:"/classes",icon:"bx bxs-school",exact:!0},{title:"Sessions",href:"/classes/sessions",icon:"bx bx-time-five"}];function $r(){return t("div",{children:[e(xe,{titleName:"Classrooms",titleIcon:"bx bxs-school",items:kr}),e(oe,{children:e(F,{path:"/classes",render:({match:{url:a}})=>t(M,{children:[e(F,{path:a,component:Dr,exact:!0}),e(F,{path:`${a}/sessions`,component:Ir})]})})})]})}const Ze={url:"",image:null,isNew:!1},Nt=a=>{const{src:n,alt:l}=a;return e(te,{className:"user-thumbnail",src:n,alt:l})},Tr=H`query {
  content: loadDashboard{
    totalTeachers
    totalStudents
    totalSessions
    totalClassrooms
    totalBooks
    recentStudents{
      id
      fullName
      admissionNumber
      passport
      active
      classroom{
        level
        stream
      }
    }
    topTeachers{
      id
      title
      fullName
      passport
      email
    }
  }
}`;function Pr(){let a=ne();const n=mt(p=>p.auth.user),{loading:l,error:s,data:r}=le(Tr),[o,v]=b.exports.useState(null);b.exports.useEffect(()=>{const x=new Date().getHours();let d="morning";x>12&&x<=17?d="afternoon":x>17&&x<=24&&(d="evening"),v(d)},[]);const f=[{name:"",selector:p=>p.photo,width:"70px"},{name:"#REG",selector:p=>p.serialNumber,sortable:!0,width:"100px"},{name:"Name",selector:p=>p.name,sortable:!0},{name:"Level",selector:p=>p.level,sortable:!0},{name:"Status",selector:p=>p.status,width:"150px"}],i=()=>{a.push("/students")};return l?e(oe,{children:e(L,{})}):s?e(oe,{children:e(ie,{message:s.message})}):e(oe,{children:e(Ae,{children:t(A,{className:"dashboard",children:[t(D,{sx:{my:2,mx:5},children:["Hi ",e("b",{children:n.firstName}),", good ",o,"!"]}),t(U,{container:!0,spacing:3,className:"card-widgets",children:[e(U,{item:!0,sm:6,lg:3,children:e(ue,{className:"card",sx:{p:4},children:t(U,{container:!0,children:[t(U,{item:!0,sm:8,children:[e(D,{variant:"h4",color:"secondary",className:"count",children:r.content.totalStudents}),e(D,{className:"label",children:"Students"})]}),e(U,{item:!0,children:e($a,{className:"icon"})})]})})}),e(U,{item:!0,sm:6,lg:3,children:e(ue,{className:"card",sx:{p:4},children:t(U,{container:!0,children:[t(U,{item:!0,sm:8,children:[e(D,{variant:"h4",color:"secondary",className:"count",children:r.content.totalTeachers}),e(D,{className:"label",children:"Teachers"})]}),e(U,{item:!0,children:e(Ta,{className:"icon"})})]})})}),e(U,{item:!0,sm:6,lg:3,children:e(ue,{className:"card",sx:{p:4},children:t(U,{container:!0,children:[t(U,{item:!0,sm:8,children:[e(D,{variant:"h4",color:"secondary",className:"count",children:r.content.totalBooks}),e(D,{className:"label",children:"Books"})]}),e(U,{item:!0,children:e(Pa,{className:"icon"})})]})})}),e(U,{item:!0,sm:6,lg:3,children:e(ue,{className:"card",sx:{p:4},children:t(U,{container:!0,children:[t(U,{item:!0,sm:8,children:[e(D,{variant:"h4",color:"secondary",className:"count",children:r.content.totalSessions}),e(D,{className:"label",children:"Sessions"})]}),e(U,{item:!0,sm:4,children:e(Ba,{className:"icon"})})]})})})]}),t(U,{container:!0,sx:{my:3},spacing:3,children:[e(U,{item:!0,sm:12,lg:8,children:t(A,{className:"recent-students",children:[t(E,{direction:"row",justifyContent:"space-between",sx:{px:5},children:[e(D,{color:"secondary",variant:"h5",sx:{my:2},children:"Recent Students"}),e(A,{sx:{my:2},children:e(q,{variant:"contained",color:"secondary",onClick:i,children:"View All"})})]}),e(pt,{columns:f,data:r.content.recentStudents.map(p=>({id:p.id,photo:e(Nt,{src:p.passport,alt:p.fullName}),serialNumber:p.admissionNumber,name:p.fullName,level:`${p.classroom.level} ${p.classroom.stream}`,status:p.active?e(Se,{label:"Active",color:"secondary",size:"small"}):e(Se,{label:"Inactive",color:"default",size:"small"})}))})]})}),e(U,{item:!0,sm:12,lg:4,children:e(A,{className:"top-teachers",children:t(E,{children:[e(D,{color:"secondary",variant:"h5",sx:{mt:2,mx:3},children:"Top Teachers"}),e(ct,{sx:{width:"100%"},children:r.content.topTeachers.map(p=>t(_e,{alignItems:"flex-start",children:[e(Ge,{children:e(te,{src:p.passport,alt:p.fullName})}),e(ze,{primary:p.fullName,secondary:p.email})]},p.id))})]})})})]})]})})})}const Br=[{title:"Fee payment",href:"/finance",icon:"bx bxs-right-arrow",exact:!0},{title:"Invoices",href:"/finance/invoices",icon:"bx bxs-right-arrow"},{title:"Fee Structure",href:"/finance/fee-structure",icon:"bx bxs-right-arrow"},{title:"Fee Balance",href:"/finance/fee-balances",icon:"bx bxs-right-arrow"},{title:"Expense",href:"/finance/expenses",icon:"bx bxs-right-arrow"},{title:"Income",href:"/finance/income",icon:"bx bxs-right-arrow"}];function qr(){return t(M,{children:[e(xe,{titleName:"Finance",titleIcon:"bx bxs-graduation",items:Br}),e(oe,{children:e(Me,{feature:"Finance"})})]})}const Ar=H`query{
  books: getBooks{
    id
    isbn
    title
    cover
    publisher{
      id
      name
    }
    category{
      id
      name
    }
    createdAt
  }
}`,Er=H`
  mutation deleteBook($id: ID!){
    deleteBook(id: $id)
  }
`;function Or(){const a=ne(),{loading:n,error:l,data:s,refetch:r}=le(Ar,{fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[o]=Oe(Er,{onCompleted:()=>{Y({text:"Book deleted successfully"}),r()},onError:d=>{j({text:d.message})}}),v=({id:d})=>{Pe({title:"Delete book!"}).then(h=>{h.isConfirmed?o({variables:{id:d}}):h.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, book not deleted"})})},f=()=>{a.push("/library/books/new")},i=({id:d})=>{a.push(`/library/books/edit/${d}`)};let p=[{title:"Edit",action:i,icon:e(pe,{fontSize:"small"})},{title:"Delete",action:v,icon:e(Ue,{fontSize:"small",color:"red"})}];const x=[{name:"",selector:d=>d.cover,width:"80px"},{name:"ISBN",selector:d=>d.isbn,sortable:!0},{name:"Title",selector:d=>d.title,sortable:!0},{name:"Category",selector:d=>d.category,sortable:!0},{name:"Publisher",selector:d=>d.publisher,sortable:!0},{selector:d=>d.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}];return n?e(L,{}):l?e(ie,{message:l.message}):t(M,{children:[e(C,{sx:{mb:3,display:"flex",justifyContent:"end"},children:t(q,{color:"secondary",variant:"contained",onClick:f,children:[e(Fe,{})," Add New Book"]})}),e(me,{title:"Books",progressPending:n,defaultSortFieldId:1,columns:x,onRowClicked:i,data:s.books.map(d=>({id:d.id,cover:e(te,{src:d.cover,alt:d.title,variant:"rounded",children:e(je,{})}),isbn:d.isbn,title:d.title,category:d.category.name,publisher:d.publisher.name,created:be(d.createdAt).format("DD-MM-yyyy h:mm:ss a"),action:e(Be,{options:p,row:d})}))})]})}function se(r){var o=r,{children:a,value:n,index:l}=o,s=wt(o,["children","value","index"]);return e(C,g(u({role:"tabpanel",hidden:n!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`},s),{children:n===l&&e(C,{sx:{p:3},children:a})}))}se.propTypes={children:nt.node,index:nt.number.isRequired,value:nt.number.isRequired};function de(a){return{id:`simple-tab-${a}`,"aria-controls":`simple-tabpanel-${a}`,sx:{fontSize:"0.8rem",pb:0,pt:0}}}const Fr=H`
query lenders {
  lenders: getLenders {
    students {
      id
      name
      number
      meta
      total
      returned
      borrowed
    }
    teachers {
      id
      name
      number
      meta
      total
      returned
      borrowed
    }
  }
}

`;function qt(){const a=ne(),[n,l]=b.exports.useState(!1),[s,r]=b.exports.useState(!1),[o,v]=b.exports.useState(!1),[f,i]=b.exports.useState(0),[p,x]=b.exports.useState(""),{loading:d,error:h,data:S}=le(Fr,{nextFetchPolicy:"network-only",fetchPolicy:"network-only"}),[N,y]=b.exports.useState(null),[m,P]=b.exports.useState(null),w=()=>l(!n),W=(T,K)=>{i(K)},_=()=>{x(""),y(null),P(null),v(!1),w()},c=()=>{x(""),y(null),P(null),v(!1)},I=T=>{T.preventDefault(),f===0?B():O()},B=()=>{r(!0);let T={query:`query ($data: String!){
        student: getStudentByAdmissionNumber(admissionNumber: $data){
          id
          fullName
          admissionNumber
          passport
          classroom{
            level
            stream
          }
        }
      }`,variables:{data:p}};new z().getData(T).then(K=>{(K==null?void 0:K.student)&&y(K.student)}).finally(()=>{r(!1),v(!0)})},O=()=>{r(!0);let T={query:`query ($data: String!){
        teacher: getTeacherByIDNumber(idNumber: $data){
          id
          fullName
          serialNumber
          idNumber
          passport
        }
      }`,variables:{data:p}};new z().getData(T).then(K=>{(K==null?void 0:K.teacher)&&P(K.teacher)}).finally(()=>{r(!1),v(!0)})},ve=[{name:"Reg.",selector:T=>T.number,width:"80px"},{name:"Name",selector:T=>T.name},{name:"Classroom",selector:T=>T.meta},{name:"Rating",selector:T=>T.total},{name:"Issued",selector:T=>T.borrowed}],De=[{name:"#",selector:T=>T.number,width:"80px"},{name:"Name",selector:T=>T.name},{name:"Email",selector:T=>T.meta},{name:"Rating",selector:T=>T.total},{name:"Issued",selector:T=>T.borrowed}],Ke=({person:T,sx:K})=>t(q,{variant:"contained",color:"secondary",className:"no-transform",sx:g(u({},K),{my:2}),onClick:()=>{i(T==="Student"?0:1),_()},children:["Issue Book to  ",T]}),k=()=>{N?X({id:N.id}):m&&R({id:m.id})},X=({id:T})=>{a.push(`/library/issue/students/${T}`)},R=({id:T})=>{a.push(`/library/issue/teachers/${T}`)};return d?e(L,{}):h?e(ie,{message:h.message}):t(M,{children:[t(E,{direction:"row",sx:{display:"flex",justifyContent:"end"},children:[e(Ke,{person:"Student"}),e(Ke,{person:"Teacher",sx:{ml:3}})]}),e(ue,{children:t(A,{sx:{width:"100%",position:"relative"},children:[e(A,{style:{position:"absolute",width:"auto",marginLeft:"calc(100% - 400px)",justifyContent:"end",zIndex:100},sx:{display:{md:"none",lg:"flex"}},children:e($,{size:"small",label:"Search",placeholder:"Search ...",color:"secondary",sx:{mt:2,mr:3,width:{sm:"150px",lg:"250px"}}})}),t(Xe,{sx:{borderBottom:"1px solid #e8e8e8"},value:f,onChange:W,textColor:"secondary",indicatorColor:"secondary",children:[e(ce,u({icon:e(qa,{sx:{fontSize:20}}),iconPosition:"start",label:`Students (${S.lenders.students.length})`},de(0))),e(ce,u({icon:e(st,{sx:{fontSize:20}}),iconPosition:"start",label:`Teachers (${S.lenders.teachers.length})`},de(1)))]}),e(se,{value:f,index:0,children:e(me,{onRowClicked:X,columns:ve,data:S.lenders.students.map(T=>{let K=parseFloat((T.returned*5/T.total).toFixed(1));return{id:T.id,number:T.number,name:T.name,meta:T.meta,total:e(Le,{precision:.5,value:K,readOnly:!0}),borrowed:be(T.borrowed).format("DD-MM-yyyy")}})})}),e(se,{value:f,index:1,children:e(me,{onRowClicked:R,columns:De,data:S.lenders.teachers.map(T=>{let K=parseFloat((T.returned*5/T.total).toFixed(1));return{id:T.id,number:T.number,name:T.name,meta:T.meta,total:e(Le,{precision:.5,value:K,readOnly:!0}),borrowed:be(T.borrowed).format("DD-MM-yyyy")}})})})]})}),e(Te,{isOpen:n,children:s?e(ee,{children:e(L,{})}):!s&&!o?t(M,{children:[e(fe,{toggle:w,children:f===0?"Find Student":"Find Staff"}),e(ee,{children:t("form",{onSubmit:I,method:"post",children:[e(A,{sx:{my:2,px:3},children:e($,{value:p,label:f===0?"Enter Admission Number":"Enter ID Number",required:!0,autoFocus:!0,color:"secondary",placeholder:f===0?"Admission Number":"ID Number",fullWidth:!0,onChange:T=>x(T.target.value)})}),t(E,{sx:{mt:3,mb:2,px:3},spacing:3,direction:"row-reverse",justifyContent:"end",children:[e(q,{color:"secondary",variant:"contained",type:"submit",children:"Continue"}),e(q,{color:"secondary",variant:"outlined",type:"button",onClick:w,children:"Cancel"})]})]})})]}):o&&(N||m)?t(ee,{children:[t(A,{sx:{my:2,px:3},children:[N&&t(E,{children:[e(A,{sx:{display:"flex",justifyContent:"center"},children:e(te,{src:N.passport,alt:N.fullName,sx:{height:"7rem",width:"7rem"},children:e(st,{sx:{width:"60%",height:"60%"}})})}),e(D,{variant:"h5",align:"center",sx:{mt:2},children:N.fullName}),t(ct,{sx:{width:"100%"},children:[t(_e,{children:[e(Ge,{children:e(dt,{})}),e(ze,{primary:N.admissionNumber,secondary:"Admission Number"})]}),e(ae,{}),t(_e,{children:[e(Ge,{children:e(ft,{})}),e(ze,{primary:`${N.classroom.level}, ${N.classroom.stream}`,secondary:"Classroom"})]}),e(ae,{})]})]}),m&&t(E,{children:[e(A,{sx:{display:"flex",justifyContent:"center"},children:e(te,{src:m.passport,alt:m.fullName,sx:{height:"7rem",width:"7rem"},children:e(st,{sx:{width:"60%",height:"60%"}})})}),e(D,{variant:"h5",align:"center",sx:{mt:2},children:m.fullName}),t(ct,{sx:{width:"100%"},children:[t(_e,{children:[e(Ge,{children:e(Aa,{})}),e(ze,{primary:m.serialNumber,secondary:"Staff Number"})]}),e(ae,{}),t(_e,{children:[e(Ge,{children:e(dt,{})}),e(ze,{primary:m.idNumber,secondary:"ID Number"})]}),e(ae,{})]})]})]}),t(E,{sx:{mt:3,mb:2,px:3},spacing:3,direction:"row-reverse",justifyContent:"end",children:[e(q,{color:"secondary",variant:"contained",onClick:k,children:"Continue"}),e(q,{color:"secondary",variant:"outlined",onClick:w,children:"Cancel"})]})]}):e(ee,{children:t(E,{sx:{py:3,px:2},children:[e(A,{sx:{display:"flex",justifyContent:"center"},children:t(he,{severity:"warning",children:[f===0?"Student":"Teacher"," not found"]})}),e(A,{sx:{mt:3,display:"flex",justifyContent:"center"},children:e(q,{color:"secondary",variant:"outlined",onClick:c,children:"Search Again"})})]})})})]})}const At={name:"",description:""},Rr=H`query{
  categories: getBookCategories{
    id
    name
    description
  }
}
`;function Mr(){const[a,n]=b.exports.useState(!1),{loading:l,error:s,data:r,refetch:o}=le(Rr),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(!1),[x,d]=b.exports.useState(null),[h,S]=b.exports.useState(At),N=()=>n(!a),y=()=>{N(),d(null),S(At)},m=c=>{c.preventDefault(),f(!0);let I=x?{query:`mutation ($id: ID!, $data: NewBookCategory!){
        updateBookCategory(id: $id, input: $data)
     }`,variables:{id:x,data:h}}:{query:`mutation ($data: NewBookCategory!){
        createBookCategory(input: $data)
      }`,variables:{data:h}};new z().createOrUpdate(I).then(B=>{B.status===200?(Y({text:"Category saved successfully"}),N(),o()):j({text:B.message})}).finally(()=>{f(!1)})},P=c=>{d(c.id),p(!0);let I={query:`query ($id: ID!){
        category: getBookCategory(id: $id){
          id
          name
          description
        }
      }`,variables:{id:c.id}};new z().getData(I).then(B=>{if(B){let O=B.category;S({name:O.name,description:O.description})}}).finally(()=>{p(!1)}),N()};let W=[{title:"Edit",action:P,icon:e(pe,{fontSize:"small"})},{title:"Delete",action:c=>{Pe({title:"Delete category!"}).then(I=>{if(I.isConfirmed){let B={query:`mutation ($id: ID!){
            deleteBookCategory(id: $id)
          }`,variables:{id:c.id}};new z().delete(B).then(O=>{O.status===200?(Y({text:"Category deleted successfully"}),o()):j({text:O.message})})}else I.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, category not deleted"})})},icon:e(Ue,{fontSize:"small",color:"red"})}];const _=[{name:"Name",selector:c=>c.name,sortable:!0},{name:"Description",selector:c=>c.description,sortable:!0},{selector:c=>c.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}];return l?e(L,{}):s?e(ie,{message:s.message}):t(M,{children:[e(C,{sx:{mb:3,display:"flex",justifyContent:"end"},children:t(q,{color:"secondary",variant:"contained",onClick:y,children:[e(Fe,{})," Add New Category"]})}),e(me,{title:"Book Categories",progressPending:l,defaultSortFieldId:1,columns:_,onRowClicked:P,data:r.categories.map(c=>({id:c.id,name:c.name,description:c.description,action:e(Be,{options:W,row:c})}))}),e(Te,{isOpen:a,children:i?e(ee,{children:e(L,{})}):t("form",{onSubmit:m,method:"post",children:[e(fe,{toggle:N,children:t("span",{children:[e("i",{className:`fa fa-${x?"edit":"plus-circle"}`})," ",x?"Edit category details":"Create a new category"]})}),e(ee,{children:t("div",{className:"row px-3",children:[e("div",{className:"mt-3",children:e($,{label:"Category name",color:"secondary",required:!0,fullWidth:!0,value:h.name,onChange:c=>S(g(u({},h),{name:c.target.value}))})}),e("div",{className:"mt-3",children:e($,{label:"Description",color:"secondary",placeholder:"(optional)",multiline:!0,rows:4,fullWidth:!0,value:h.description,onChange:c=>S(g(u({},h),{description:c.target.value}))})})]})}),e(Ye,{children:e("div",{className:"col-12 d-flex justify-content-start ps-4",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:v,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})})]})})]})}function Wr(){return e(M,{children:e(Me,{feature:"Library Reports"})})}const Et={name:""},zr=H`query{
  publishers: getPublishers{
    id
    name
  }
}`;function Lr(){const[a,n]=b.exports.useState(!1),{loading:l,error:s,data:r,refetch:o}=le(zr),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(!1),[x,d]=b.exports.useState(null),[h,S]=b.exports.useState(Et),N=()=>n(!a),y=()=>{N(),d(null),S(Et)},m=c=>{c.preventDefault(),f(!0);let I=x?{query:`mutation ($id: ID!, $data: NewPublisher!){
        updatePublisher(id: $id, input: $data)
     }`,variables:{id:x,data:h}}:{query:`mutation ($data: NewPublisher!){
        createPublisher(input: $data)
      }`,variables:{data:h}};new z().createOrUpdate(I).then(B=>{B.status===200?(Y({text:"Publisher saved successfully"}),N(),o()):j({text:B.message})}).finally(()=>{f(!1)})},P=c=>{d(c.id),p(!0);let I={query:`query ($id: ID!){
        publisher: getPublisher(id: $id){
          id
          name
        }
      }`,variables:{id:c.id}};new z().getData(I).then(B=>{if(B){let O=B.publisher;S({name:O.name})}}).finally(()=>{p(!1)}),N()};let W=[{title:"Edit",action:P,icon:e(pe,{fontSize:"small"})},{title:"Delete",action:c=>{Pe({title:"Delete publisher!"}).then(I=>{if(I.isConfirmed){let B={query:`mutation ($id: ID!){
            deletePublisher(id: $id)
          }`,variables:{id:c.id}};new z().delete(B).then(O=>{O.status===200?(Y({text:"Publisher deleted successfully"}),o()):j({text:O.message})})}else I.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, publisher not deleted"})})},icon:e(Ue,{fontSize:"small",color:"red"})}];const _=[{name:"Name",selector:c=>c.name,sortable:!0},{selector:c=>c.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}];return l?e(L,{}):s?e(ie,{message:s.message}):t(M,{children:[e(C,{sx:{mb:3,display:"flex",justifyContent:"end"},children:t(q,{color:"secondary",variant:"contained",onClick:y,children:[e(Fe,{})," Add New Publisher"]})}),e(me,{title:"Book Publishers",progressPending:l,defaultSortFieldId:1,columns:_,onRowClicked:P,data:r.publishers.map(c=>({id:c.id,name:c.name,action:e(Be,{options:W,row:c})}))}),e(Te,{isOpen:a,children:i?e(ee,{children:e(L,{})}):t("form",{onSubmit:m,method:"post",children:[e(fe,{toggle:N,children:t("span",{children:[e("i",{className:`fa fa-${x?"edit":"plus-circle"}`})," ",x?"Edit publisher details":"Create a new publisher"]})}),e(ee,{children:e("div",{className:"row px-3",children:e("div",{className:"mt-3",children:e($,{label:"Publisher name",color:"secondary",required:!0,fullWidth:!0,value:h.name,onChange:c=>S(g(u({},h),{name:c.target.value}))})})})}),e(Ye,{children:e("div",{className:"col-12 d-flex justify-content-start ps-4",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:v,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})})]})})]})}const St={TEACHER:"TEACHER",STUDENT:"STUDENT"},Ur=H`
query ($data:String!){
  book: getBookByISBN(isbn: $data){
    id
    isbn
    title
    cover
  }
}
`,jr=H`
  mutation($data:LendStudent!){
    lendToStudent(input: $data)
  }
`,_r=H`
  mutation($data:LendTeacher!){
    lendToTeacher(input: $data)
  }
`;function oa({lendTo:a,id:n,refetch:l}){const[s,r]=b.exports.useState(""),[o,v]=b.exports.useState(""),[f,i]=b.exports.useState(""),[p,x]=b.exports.useState(null),[d,h]=b.exports.useState(!1),S=()=>h(!d),N=()=>{v(""),r(""),i(""),x(null),S()},[y,{loading:m,error:P}]=Yt(Ur,{onCompleted:k=>{k.book&&x(k.book)}}),[w,{loading:W,reset:_}]=Oe(jr,{onCompleted:()=>{S(),l(),_(),Y({text:"Book lent to student successfully"})},onError:k=>{j({text:k.message}),_()}}),[c,{loading:I,reset:B}]=Oe(_r,{onCompleted:()=>{S(),l(),B(),Y({text:"Book lent successfully"})},onError:k=>{j({text:k.message}),B()}}),O=()=>{w({variables:{data:{studentID:n,bookID:p.id,bookNumber:s}}})},ve=()=>{c({variables:{data:{teacherID:n,bookID:p.id,bookNumber:s}}})};return t(M,{children:[t(q,{variant:"contained",color:"secondary",onClick:N,children:[e(Fe,{})," ",e(D,{sx:{ml:1},children:"Add Book"})]}),e(Te,{isOpen:d,children:!p&&m?e(L,{}):!p||P?t("form",{onSubmit:k=>{k.preventDefault(),o!==f&&(y({variables:{data:o}}),i(o))},children:[e(fe,{toggle:S,children:"Find Book"}),t(ee,{children:[e($,{label:"Enter Book ISBN",required:!0,autoFocus:!0,color:"secondary",fullWidth:!0,value:o,onChange:k=>v(k.target.value)}),P&&e(he,{severity:"error",sx:{my:2},children:P.message}),e(ae,{sx:{mt:3}}),t(E,{direction:"row",spacing:3,sx:{display:"flex",justifyContent:"end",mt:2,pr:3},children:[e(q,{color:"secondary",variant:"outlined",type:"button",onClick:S,children:"Cancel"}),e(J,{color:"secondary",variant:"contained",type:"submit",loading:m,children:"Continue"})]})]})]}):p&&t(M,{children:[e(fe,{toggle:S,children:"Issue Book"}),e(ee,{children:t("form",{onSubmit:k=>{k.preventDefault(),a===St.TEACHER?ve():O()},children:[t(U,{container:!0,sx:{p:2},children:[e(U,{item:!0,sm:4,sx:{pr:3},children:e(te,{src:p.cover,sx:{height:"100%",width:"100%"},variant:"rounded",children:e(je,{sx:{width:"7rem",height:"auto"}})})}),t(U,{item:!0,sm:8,children:[e(D,{variant:"h5",children:p.title}),t(D,{variant:"h6",color:"gray",children:["code: ",p.isbn]}),e($,{label:"Book Number",required:!0,autoFocus:!0,color:"secondary",fullWidth:!0,value:s,onChange:k=>r(k.target.value),sx:{mt:4}})]})]}),e(ae,{}),t(E,{direction:"row",spacing:3,sx:{display:"flex",justifyContent:"end",mt:2,pr:3},children:[e(q,{color:"secondary",variant:"outlined",type:"button",onClick:S,children:"Cancel"}),e(J,{color:"secondary",variant:"contained",type:"submit",loading:W||I,children:"Save"})]})]})})]})})]})}const Gr=H`
  mutation($id:ID!){
    returnBook(borrowID: $id)
  }
`;function ia({book:a,modal:n,toggleModal:l,refetch:s}){const[r,o]=b.exports.useState(""),[v,{loading:f,reset:i}]=Oe(Gr,{onCompleted:()=>{o(""),l(),s(),i(),Y({text:"Book returned successfully"})},onError:d=>{i(),j({text:d.message})}}),p=()=>{o(""),l()};return e(M,{children:t(Te,{isOpen:n,children:[e(fe,{toggle:l,children:"Return Book"}),e(ee,{children:t("form",{onSubmit:d=>{d.preventDefault(),r===a.bookNumber?v({variables:{id:a.id}}):ye({text:"book numbers do not match"})},children:[t(U,{container:!0,sx:{p:2},children:[e(U,{item:!0,sm:4,sx:{pr:3},children:e(te,{src:a.cover,sx:{height:"100%",width:"100%"},variant:"rounded",children:e(je,{sx:{width:"7rem",height:"auto"}})})}),t(U,{item:!0,sm:8,children:[e(D,{variant:"h5",children:a.title}),t(C,{sx:{display:"flex",mt:2},children:[e(D,{sx:{alignSelf:"center",mr:1},children:"Verify:"}),e(D,{variant:"h6",children:e("b",{children:a.bookNumber})})]}),e($,{label:"Book Number",required:!0,autoFocus:!0,color:"secondary",fullWidth:!0,value:r,onChange:d=>o(d.target.value),sx:{mt:4}})]})]}),e(ae,{}),t(E,{direction:"row",spacing:3,sx:{display:"flex",justifyContent:"end",mt:2,pr:3},children:[e(q,{color:"secondary",variant:"outlined",type:"button",onClick:p,children:"Cancel"}),e(J,{color:"secondary",variant:"contained",type:"submit",loading:f,children:"Return"})]})]})})]})})}const Yr=H`
  query ($id: ID!){
    student: getStudent(id: $id){
      id
      fullName
      passport
      gender
      age
      active
      classroom{
        id
        level
        stream
      }
    }
    books: getStudentBorrowedBooks(studentID: $id){
      id
      bookNumber
      createdAt
      returned
      dueDate
      status
      book{
        id
        title
        cover
      }
    }
  }
`;function Hr(){let{uid:a}=Re(),n=ne();const[l,s]=b.exports.useState(0),[r,o]=b.exports.useState(null),[v,f]=b.exports.useState(null),{loading:i,error:p,data:x,refetch:d}=le(Yr,{variables:{id:a}});b.exports.useEffect(()=>{if(!p&&!i){let y=x.books.filter(P=>P.status==="returned").length,m=x.books.length;y&&s((y*5/m).toFixed(1))}},[p,i,x]);const h=[{name:"",selector:y=>y.cover,width:"76px"},{name:"Title",selector:y=>y.title},{name:"Number",selector:y=>y.bookNumber},{name:"Borrowed",selector:y=>y.createdAt},{name:"Returned",selector:y=>y.returned},{name:"Status",selector:y=>y.status,width:"120px"}],S=()=>f(!N),N=({id:y,title:m,bookNumber:P})=>{o({id:y,title:m,bookNumber:P}),f(!0)};return i?e(L,{}):p?e(ie,{message:p.message}):t(M,{children:[r&&e(ia,{book:r,modal:v,toggleModal:S,refetch:d}),t(ue,{children:[t(A,{sx:{p:3,display:"flex"},children:[e(E,{children:e(te,{variant:"rounded",src:x.student.passport,alt:x.student.fullName,sx:{width:"10rem",height:"10rem",mb:1,cursor:"pointer"},children:e(et,{sx:{fontSize:"8rem"}})})}),t(A,{children:[t(A,{sx:{display:"flex"},children:[t(E,{spacing:1.5,sx:{ml:5,alignItems:"start"},children:[e(D,{fontWeight:700,children:x.student.fullName}),t(D,{variant:"body2",color:"text.secondary",children:[e(ft,{sx:{fontSize:"1.2rem"},color:"secondary"})," ",x.student.classroom.level," ",x.student.classroom.stream]}),t(D,{variant:"body2",color:"text.secondary",children:[e(He,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",x.student.gender]}),t(D,{variant:"body2",color:"text.secondary",children:[e(tt,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",x.student.age," yrs old"]}),t(D,{variant:"body2",color:"text.secondary",children:[e(Ht,{sx:{fontSize:"1.2rem"},color:x.student.active?"success":"disabled"}),"  ",x.student.active?"Active":"Not active"]})]}),e(E,{spacing:1.5,sx:{ml:5,alignItems:"start"},children:t(E,{direction:"column",children:[e(D,{variant:"body2",color:"text.secondary",children:"Library Rating"}),e(D,{variant:"h4",children:l}),e(Le,{precision:.5,max:5,value:parseFloat(l)})]})})]}),t(E,{sx:{ml:5,mt:3},direction:"row",spacing:3,children:[e(oa,{id:a,refetch:d,lendTo:St.STUDENT}),t(q,{variant:"outlined",color:"secondary",onClick:()=>n.push("/library/issue"),children:[e(at,{})," ",e(D,{sx:{ml:1},children:"Close"})]})]})]})]}),e(ae,{}),e(me,{columns:h,onRowClicked:N,data:x.books.map(y=>({id:y.id,cover:t(te,{src:y.book.cover,variant:"rounded",children:[e(je,{})," "]}),title:y.book.title,bookNumber:y.bookNumber,createdAt:be(y.createdAt).format("DD/MM/yyyy"),returned:y.dueDate<new Date?e(Se,{label:y.returned?be(y.returned).format("DD/MM/yyyy"):"overdue",color:"error",variant:"outlined"}):e(Se,{variant:"outlined",color:"success",label:y.returned?be(y.returned).format("DD/MM/yyyy"):"reading"}),status:e(Se,{color:y.status==="returned"?"secondary":"default",label:y.status})}))})]})]})}const Qr=H`
  query ($id: ID!){
    teacher: getTeacher(id: $id){
      id
      email
      fullName
      idNumber
      passport
      gender
      age
    }
    books: getTeacherBorrowedBooks(teacherID: $id){
      id
      bookNumber
      createdAt
      returned
      dueDate
      status
      book{
        id
        title
        cover
      }
    }
  }
`;function Kr(){let{uid:a}=Re(),n=ne();const[l,s]=b.exports.useState(0),[r,o]=b.exports.useState(null),[v,f]=b.exports.useState(null),{loading:i,error:p,data:x,refetch:d}=le(Qr,{variables:{id:a}});b.exports.useEffect(()=>{if(!p&&!i){let y=x.books.filter(P=>P.status==="returned").length,m=x.books.length;y&&s((y*5/m).toFixed(1))}},[p,i,x]);const h=[{name:"",selector:y=>y.cover,width:"76px"},{name:"Title",selector:y=>y.title},{name:"Number",selector:y=>y.bookNumber},{name:"Borrowed",selector:y=>y.createdAt},{name:"Returned",selector:y=>y.returned},{name:"Status",selector:y=>y.status,width:"120px"}],S=()=>f(!N),N=({id:y,title:m,bookNumber:P})=>{o({id:y,title:m,bookNumber:P}),f(!0)};return i?e(L,{}):p?e(ie,{message:p.message}):t(M,{children:[r&&e(ia,{book:r,modal:v,toggleModal:S,refetch:d}),t(ue,{children:[t(A,{sx:{p:3,display:"flex"},children:[e(E,{children:e(te,{variant:"rounded",src:x.teacher.passport,alt:x.teacher.fullName,sx:{width:"10rem",height:"10rem",mb:1,cursor:"pointer"},children:e(et,{sx:{fontSize:"8rem"}})})}),t(A,{children:[t(A,{sx:{display:"flex"},children:[t(E,{spacing:1.5,sx:{ml:5,alignItems:"start"},children:[e(D,{fontWeight:700,children:x.teacher.fullName}),e(D,{variant:"body2",color:"text.secondary",children:x.teacher.email}),t(D,{variant:"body2",color:"text.secondary",children:[e(He,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",x.teacher.gender]}),t(D,{variant:"body2",color:"text.secondary",children:[e(tt,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",x.teacher.age," yrs old"]}),t(D,{variant:"body2",color:"text.secondary",children:[e(dt,{sx:{fontSize:"1.2rem"}})," ",x.teacher.idNumber]})]}),e(E,{spacing:1.5,sx:{ml:5,alignItems:"start"},children:t(E,{direction:"column",children:[e(D,{variant:"body2",color:"text.secondary",children:"Library Rating"}),e(D,{variant:"h4",children:l}),e(Le,{precision:.5,max:5,value:parseFloat(l)})]})})]}),t(E,{sx:{ml:5,mt:3},direction:"row",spacing:3,children:[e(oa,{id:a,refetch:d,lendTo:St.TEACHER}),t(q,{variant:"outlined",color:"secondary",onClick:()=>n.push("/library/issue"),children:[e(at,{})," ",e(D,{sx:{ml:1},children:"Close"})]})]})]})]}),e(ae,{}),e(me,{columns:h,onRowClicked:N,data:x.books.map(y=>({id:y.id,cover:t(te,{src:y.book.cover,variant:"rounded",children:[e(je,{})," "]}),title:y.book.title,bookNumber:y.bookNumber,createdAt:be(y.createdAt).format("DD/MM/yyyy"),returned:y.dueDate<new Date?e(Se,{label:y.returned?be(y.returned).format("DD/MM/yyyy"):"overdue",color:"error",variant:"outlined"}):e(Se,{variant:"outlined",color:"success",label:y.returned?be(y.returned).format("DD/MM/yyyy"):"reading"}),status:y.status==="returned"?e(Se,{color:"secondary",variant:"outlined",label:y.status}):e(Se,{color:"default",label:y.status})}))})]})]})}const Ot={isbn:"",title:"",author:"",edition:"",publisherID:"",categoryID:"",metaData:""},Vr=H`
query{
  categories: getBookCategories{
    id
    name
  }
  publishers: getPublishers{
    id
    name
  }
}
`,Zr=H`
query ($data: String!){
  book: getBookByISBN(isbn: $data){
    id
    isbn
    title
    author
    edition
    publisher{
      id
      name
    }
    category{
      id
      name
    }
    metaData
  }
}
`,Jr=H`
  mutation ($data: NewBook!){
    createBook(input: $data)
  }
`;function Xr(){const a=ne(),[n,l]=b.exports.useState(Ot),[s,r]=b.exports.useState(!1),[o,v]=b.exports.useState(!1),{data:f}=le(Vr),[i,{data:p,searching:x}]=Yt(Zr,{onCompleted:w=>{(w==null?void 0:w.book)&&Y({text:"Book already registered"}),r(!0)},fetchPolicy:"no-cache",nextFetchPolicy:"no-cache"}),[d,{loading:h,reset:S}]=Oe(Jr,{onCompleted:()=>{v(!0),S()},onError:w=>{j({text:w.message}),S()}}),N=()=>{l(Ot),r(!1),v(!1)},y=w=>{w.preventDefault(),d({variables:{data:n}})},m=w=>{w.preventDefault(),i({variables:{data:n.isbn}})},P=()=>{a.push("/library/books")};return x?e(L,{}):o?e(re,{className:"col-md-8 mx-auto",children:t(A,{sx:{py:5},children:[e(A,{sx:{display:"flex",justifyContent:"center",mt:3},children:e(he,{color:"success",children:"Book Saved successfully"})}),e(A,{sx:{display:"flex",justifyContent:"center",mt:3},children:e(q,{variant:"contained",color:"secondary",onClick:N,children:"Add Another Book"})})]})}):t(re,{className:"col-md-8 mx-auto",children:[!s&&t(A,{sx:{p:5},children:[e(D,{variant:"h4",children:"Enter Book's ISBN"}),t("form",{onSubmit:m,method:"post",children:[e(A,{sx:{mt:5},children:e($,{value:n.isbn,label:"ISBN",required:!0,autoFocus:!0,color:"secondary",fullWidth:!0,onChange:w=>l(g(u({},n),{isbn:w.target.value}))})}),t(A,{sx:{display:"flex",mt:3,justifyContent:"center"},children:[e(q,{color:"secondary",variant:"contained",type:"submit",sx:{mr:3},children:"Continue"}),e(q,{color:"secondary",variant:"outlined",onClick:P,children:"Cancel"})]})]})]}),s&&!p.book&&t(A,{sx:{p:5},children:[e(D,{variant:"h4",children:"Enter Details"}),t("form",{onSubmit:y,method:"post",children:[t(A,{className:"row",sx:{py:3},children:[e(A,{className:"mt-3",children:e($,{label:"ISBN",color:"secondary",required:!0,"aria-readonly":!0,fullWidth:!0,value:n.isbn,onChange:w=>l(g(u({},n),{isbn:w.target.value}))})}),e(A,{className:"mt-3",children:e($,{label:"Book title",color:"secondary",required:!0,fullWidth:!0,value:n.title,onChange:w=>l(g(u({},n),{title:w.target.value}))})}),e(A,{className:"mt-3 col-6",children:e($,{label:"Edition",color:"secondary",fullWidth:!0,value:n.edition,onChange:w=>l(g(u({},n),{edition:w.target.value}))})}),e(A,{className:"mt-3 col-6",children:t(Q,{fullWidth:!0,color:"secondary",children:[e(V,{id:"category-label",children:"Book Category"}),e(Z,{labelId:"category-label",id:"category",label:"Book Category",required:!0,value:n.categoryID,onChange:w=>l(g(u({},n),{categoryID:w.target.value})),children:f==null?void 0:f.categories.map(w=>e(G,{value:w.id,children:w.name},w.id))})]})}),e(A,{className:"mt-3",children:e($,{label:"Author",color:"secondary",fullWidth:!0,value:n.author,onChange:w=>l(g(u({},n),{author:w.target.value}))})}),e(A,{className:"mt-3",children:t(Q,{fullWidth:!0,color:"secondary",children:[e(V,{id:"publisher-label",children:"Publisher"}),e(Z,{labelId:"publisher-label",id:"publisher",label:"Publisher",required:!0,value:n.publisherID,onChange:w=>l(g(u({},n),{publisherID:w.target.value})),children:f==null?void 0:f.publishers.map(w=>e(G,{value:w.id,children:w.name},w.id))})]})}),e(A,{className:"mt-3",children:e($,{label:"Other",color:"secondary",multiline:!0,rows:4,fullWidth:!0,value:n.metaData,onChange:w=>l(g(u({},n),{metaData:w.target.value}))})})]}),t(E,{spacing:3,direction:"row",sx:{display:"flex",mt:3},children:[e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:h,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"}),t(q,{color:"secondary",variant:"outlined",onClick:P,children:[e(Qt,{})," Cancel"]})]})]})]})]})}const el={isbn:"",title:"",author:"",edition:"",publisherID:"",categoryID:"",metaData:""},tl=H`
  query ($id: ID!){
    book: getBook(id: $id){
      id
      isbn
      title
      author
      edition
      publisher{
        id
        name
      }
      category{
        id
        name
      }
      metaData
    }
    categories: getBookCategories{
      id
      name
    }
    publishers: getPublishers{
      id
      name
    }
  }
`,al=H`
  mutation ($id: ID!, $data: NewBook!){
    updateBook(id: $id, input: $data)
  }
`;function rl(){const{uid:a}=Re(),n=ne(),[l,s]=b.exports.useState(el),[r,o]=b.exports.useState(!1),{data:v,loading:f,error:i}=le(tl,{variables:{id:a},onCompleted:N=>{if(N.book){let y=N.book;s(g(u({},l),{isbn:y.isbn,title:y.title,author:y.author,edition:y.edition,categoryID:y.category.id,publisherID:y.publisher.id,metaData:y.metaData}))}},fetchPolicy:"no-cache",nextFetchPolicy:"no-cache"}),[p,{loading:x,reset:d}]=Oe(al,{onCompleted:()=>{o(!0)},onError:N=>{j({text:N.message}),d()}}),h=N=>{N.preventDefault(),p({variables:{id:a,data:l}})},S=()=>{n.push("/library/books")};return f?e(L,{}):i?e(ie,{message:i.message}):r?e(re,{className:"col-md-8 mx-auto",children:t(C,{sx:{py:5},children:[e(C,{sx:{display:"flex",justifyContent:"center",mt:3},children:e(he,{color:"success",children:"Book Updated successfully"})}),e(C,{sx:{display:"flex",justifyContent:"center",mt:3},children:e(q,{variant:"contained",color:"secondary",onClick:S,children:"GO TO BOOKS"})})]})}):e(re,{className:"col-md-8 mx-auto",children:t(C,{sx:{p:5},children:[e(D,{variant:"h4",children:"Update Details"}),t("form",{onSubmit:h,method:"post",children:[t(C,{className:"row",sx:{py:3},children:[e(C,{className:"mt-3",children:e($,{label:"ISBN",color:"secondary",required:!0,"aria-readonly":!0,fullWidth:!0,value:l.isbn,onChange:N=>s(g(u({},l),{isbn:N.target.value}))})}),e(C,{className:"mt-3",children:e($,{label:"Book title",color:"secondary",required:!0,fullWidth:!0,value:l.title,onChange:N=>s(g(u({},l),{title:N.target.value}))})}),e(C,{className:"mt-3 col-6",children:e($,{label:"Edition",color:"secondary",fullWidth:!0,value:l.edition,onChange:N=>s(g(u({},l),{edition:N.target.value}))})}),e(C,{className:"mt-3 col-6",children:t(Q,{fullWidth:!0,color:"secondary",children:[e(V,{id:"category-label",children:"Book Category"}),e(Z,{labelId:"category-label",id:"category",label:"Book Category",required:!0,value:l.categoryID,onChange:N=>s(g(u({},l),{categoryID:N.target.value})),children:v==null?void 0:v.categories.map(N=>e(G,{value:N.id,children:N.name},N.id))})]})}),e(C,{className:"mt-3",children:e($,{label:"Author",color:"secondary",fullWidth:!0,value:l.author,onChange:N=>s(g(u({},l),{author:N.target.value}))})}),e(C,{className:"mt-3",children:t(Q,{fullWidth:!0,color:"secondary",children:[e(V,{id:"publisher-label",children:"Publisher"}),e(Z,{labelId:"publisher-label",id:"publisher",label:"Publisher",required:!0,value:l.publisherID,onChange:N=>s(g(u({},l),{publisherID:N.target.value})),children:v==null?void 0:v.publishers.map(N=>e(G,{value:N.id,children:N.name},N.id))})]})}),e(C,{className:"mt-3",children:e($,{label:"Other",color:"secondary",multiline:!0,rows:4,fullWidth:!0,value:l.metaData,onChange:N=>s(g(u({},l),{metaData:N.target.value}))})})]}),t(E,{spacing:3,direction:"row",sx:{display:"flex",mt:3},children:[e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:x,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"}),t(q,{color:"secondary",variant:"outlined",onClick:S,children:[e(Qt,{})," Cancel"]})]})]})]})})}const ll=[{title:"Issue/Return",href:"/library/issue",icon:"bx bxs-right-arrow"},{title:"Book Categories",href:"/library/categories",icon:"bx bxs-right-arrow"},{title:"Publishers",href:"/library/publishers",icon:"bx bxs-right-arrow"},{title:"Books",href:"/library/books",icon:"bx bxs-right-arrow",exact:!0},{title:"Add New Book",href:"/library/books/new",icon:"bx bx-plus-medical"},{title:"Reports",href:"/library/reports",icon:"bx bxs-right-arrow"}];function nl(){return t("div",{children:[e(xe,{titleName:"Library",titleIcon:"bx bx-book-open",items:ll}),e(oe,{children:e(F,{path:"/library",render:({match:{url:a}})=>t(M,{children:[e(F,{path:a,component:qt,exact:!0}),e(F,{path:`${a}/categories`,component:Mr}),e(F,{path:`${a}/books`,component:Or,exact:!0}),e(F,{path:`${a}/books/new`,component:Xr,exact:!0}),e(F,{path:`${a}/books/edit/:uid`,component:rl,exact:!0}),e(F,{path:`${a}/issue`,component:qt,exact:!0}),e(F,{path:`${a}/issue/students/:uid`,component:Hr}),e(F,{path:`${a}/issue/teachers/:uid`,component:Kr}),e(F,{path:`${a}/publishers`,component:Lr}),e(F,{path:`${a}/reports`,component:Wr})]})})})]})}const sl=[{title:"School Profile",href:"/settings",icon:"bx bxs-right-arrow",exact:!0},{title:"My Profile",href:"/settings/my-profile",icon:"bx bxs-right-arrow"},{title:"User groups",href:"/settings/user-groups",icon:"bx bxs-right-arrow"},{title:"Users",href:"/settings/users",icon:"bx bxs-right-arrow"},{title:"SMS Account",href:"/settings/sms",icon:"bx bxs-right-arrow"},{title:"Billing",href:"/settings/billing",icon:"bx bxs-right-arrow"}];function ol(){return t(M,{children:[e(xe,{titleName:"Settings",titleIcon:"bx bx-cog",items:sl}),e(oe,{children:e(Me,{feature:"Settings"})})]})}const il=[{title:"Compose",href:"/sms",icon:"bx bx-plus-medical",exact:!0},{title:"Outbox",href:"/sms/outbox",icon:"bx bxs-archive-out"},{title:"Contact groups",href:"/sms/groups",icon:"bx bxs-group"},{title:"Contacts",href:"/sms/contacts",icon:"bx bxs-contact"},{title:"SMS Templates",href:"/sms/templates",icon:"bx bxs-file"},{title:"SMS Preferences",href:"/sms/preferences",icon:"bx bxs-cog"}],cl=()=>t(M,{children:[e(xe,{titleName:"SMS",titleIcon:"bx bx-chat",items:il}),e(oe,{children:e(Me,{feature:"SMS"})})]}),dl=H`
  query students{
    students: getStudents{
      id
      fullName
      admissionNumber
      gender
      passport
      classroom{
        level
        stream
      }
    }
  }
`,ul=H`
 mutation deleteStudent($id: ID!){
    deleteStudent(id: $id)
  }
`,ml=()=>{let a=ne();const[n,l]=b.exports.useState([]),[s,r]=b.exports.useState([]),{loading:o,error:v,refetch:f}=le(dl,{onCompleted:m=>{m&&(l(m.students),r(m.students))}}),[i]=Oe(ul,{onError:m=>{j({text:m.message})},onCompleted:()=>{Y({text:"Student deleted successfully"}),f()}}),p=m=>{Pe({title:"Delete student!"}).then(P=>{P.isConfirmed?i({variables:{id:m.id}}):P.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, student not deleted"})})},x=m=>{a.push(`/students/profile/${m.id}/edit`)},d=m=>{a.push(`/students/profile/${m.id}`)},h=()=>{a.push("/students/new")};let S=[{title:"Open",action:d,icon:e(Kt,{fontSize:"small",color:"secondary"})},{title:"Edit",action:x,icon:e(pe,{fontSize:"small",color:"success"})},{title:"Delete",action:p,icon:e(Vt,{fontSize:"small",color:"error"})}];const N=[{name:"",selector:m=>m.photo,width:"70px"},{name:"#REG",selector:m=>m.serialNumber,sortable:!0,width:"100px"},{name:"Name",selector:m=>m.name,sortable:!0},{name:"Level",selector:m=>m.level,sortable:!0},{name:"Stream",selector:m=>m.stream,sortable:!0},{name:"Gender",selector:m=>m.gender,sortable:!0,width:"150px"},{selector:m=>m.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}],y=m=>{var P=m.target.value.toLowerCase();if(P){var w=s.filter(W=>W.admissionNumber.toLowerCase().includes(P)||W.fullName.toLowerCase().includes(P));l(w)}else l(s)};return o?e(L,{}):v?e(ie,{message:v.message}):t(M,{children:[e(C,{sx:{my:3,display:"flex",justifyContent:"end"},children:e(q,{color:"secondary",variant:"contained",className:"no-transform",onClick:h,children:t(D,{children:[e("i",{className:"fa fa-plus"}),"  Add New Student"]})})}),e(Nr,{handleSearch:y,columns:N,onRowClicked:d,data:n.map(m=>({id:m.id,photo:e(Nt,{src:m.passport,alt:m.fullName}),serialNumber:m.admissionNumber,name:m.fullName,level:m.classroom.level,stream:m.classroom.stream,gender:m.gender,action:e(Be,{options:S,row:m})}))})]})},ca=["Mr.","Mrs.","Ms."],da=["Board of Management","Teachers Service Commission"],Qe=["Male","Female"],hl={Male:["Father","Brother","Guardian"],Female:["Mother","Sister","Guardian"],male:["Father","Brother","Guardian"],female:["Mother","Sister","Guardian"],"":["Father","Mother","Brother","Sister","Guardian"]},pl=H`
  query loadData($id: ID!){
    classrooms: getClassrooms{
      id
      level
      stream
    }
    student: getStudent(id: $id){
      fullName,
      admissionNumber,
      dateOfAdmission,
      nationalID,
      gender,
      dateOfBirth,
      homeAddress,
      classroom{
        id
      }
    }
  }
`,fl={fullName:"",classID:"",admissionNumber:"",dateOfAdmission:new Date,nationalID:"",gender:"",dateOfBirth:new Date("2002-01-01T00:00:00"),homeAddress:""},bl=a=>{const{uid:n}=Re(),l=ne(),[s,r]=b.exports.useState(!1),[o,v]=b.exports.useState(!1),[f,i]=b.exports.useState(fl),[p,x]=b.exports.useState([]),{loading:d,error:h,refetch:S}=le(pl,{variables:{id:n},onCompleted:m=>{if(m){let P=m.student;i({fullName:P.fullName,classID:P.classroom.id,admissionNumber:P.admissionNumber,dateOfAdmission:P.dateOfAdmission,nationalID:P.nationalID,gender:P.gender,dateOfBirth:P.dateOfBirth,homeAddress:P.homeAddress}),x(m.classrooms)}}}),N=m=>{m.preventDefault(),r(!0);let P={query:`mutation ($id:ID!, $data: NewStudent!){
        student: updateStudent(id: $id, input: $data)
      }`,variables:{id:n,data:f}};new z().createOrUpdate(P).then(w=>{w.status===200?(Y({text:"Student details updated"}),v(!0),S()):j({text:w.message})}).finally(()=>{r(!1)})},y=()=>{l.push(`/students/profile/${n}`)};return d?e(L,{}):h?e(ie,{message:h.message}):o?e(ue,{children:t("div",{className:"py-5",children:[e("div",{className:"d-flex justify-content-center my-5",children:e(he,{severity:"success",children:"Student details updated successfully"})}),e("div",{className:"d-flex justify-content-center",children:e(q,{variant:"contained",color:"secondary",onClick:y,children:"Go to Student Profile"})})]})}):t(re,{sx:{px:5,pt:2,pb:5},className:"col-md-10 mx-auto",children:[t("div",{className:"d-flex my-3",children:[e(q,{variant:"outlined",color:"secondary",children:e(pe,{})}),t("div",{className:"ms-4",children:[e("h3",{className:"p-0 m-0",children:"Edit Student"}),e("p",{className:"text-secondary m-0",children:"edit student profile profile."})]})]}),t("form",{onSubmit:N,method:"post",children:[t(C,{className:"row",children:[e(C,{className:"col-8",sx:{mt:4},children:e($,{type:"text",label:"Full name",required:!0,value:f.fullName,fullWidth:!0,onChange:m=>i(g(u({},f),{fullName:m.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,children:[e(V,{id:"gender-label",children:"Gender"}),e(Z,{labelId:"gender-label",id:"gender",label:"Gender",required:!0,value:f.gender,onChange:m=>i(g(u({},f),{gender:m.target.value})),children:Qe.map(m=>e(G,{value:m,children:m},m))})]})}),e(C,{className:"col-md-4",sx:{mt:4},children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Date of birth",inputFormat:"DD/MM/yyyy",value:f.dateOfBirth,onChange:m=>i(g(u({},f),{dateOfBirth:m})),renderInput:m=>e($,u({fullWidth:!0},m))})})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"Admission Number",required:!0,value:f.admissionNumber,fullWidth:!0,onChange:m=>i(g(u({},f),{admissionNumber:m.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"NEMIS",required:!0,value:f.nationalID,fullWidth:!0,onChange:m=>i(g(u({},f),{nationalID:m.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Date of admission",inputFormat:"DD/MM/yyyy",value:f.dateOfAdmission,onChange:m=>i(g(u({},f),{dateOfAdmission:m})),renderInput:m=>e($,u({fullWidth:!0},m))})})}),e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,children:[e(V,{id:"role-label",children:"Classroom"}),e(Z,{labelId:"role-label",id:"role",label:"Classroom",value:f.classID,required:!0,fullWidth:!0,onChange:m=>i(g(u({},f),{classID:m.target.value})),children:p.map(m=>t(G,{value:m.id,children:[m.level," ",m.stream]},m.id))})]})}),e("div",{className:"col-12 mt-4",children:e($,{type:"text",label:"Home address",required:!0,multiline:!0,rows:4,value:f.homeAddress,placeholder:`Iris Watson
P.O. Box 283 8562 Fusce Rd.
Frederick Nebraska 20620
(372) 587-2335`,fullWidth:!0,onChange:m=>i(g(u({},f),{homeAddress:m.target.value}))})})]}),e(ae,{}),t(C,{sx:{mt:4},children:[e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:s,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"}),t(q,{size:"large",variant:"outlined",color:"secondary",sx:{ml:4},onClick:y,children:[e(at,{})," ",e(D,{sx:{ml:1},children:"Cancel"})]})]})]})]})},Ft={fullName:"",classID:"",admissionNumber:"",dateOfAdmission:new Date,nationalID:"",gender:"",dateOfBirth:new Date("2002-01-01T00:00:00"),homeAddress:""},gl=()=>{const[a,n]=b.exports.useState(!1),[l,s]=b.exports.useState(!1),[r,o]=b.exports.useState(Ft),[v,f]=b.exports.useState([]),i=()=>{let d={query:`query classrooms{
        classrooms: getClassrooms{
          id
          level
          stream
        }
      }`,variables:{}};new z().getData(d).then(h=>{f((h==null?void 0:h.classrooms.sort((S,N)=>parseInt(S.level)-parseInt(N.level)))||[])})};b.exports.useEffect(()=>{i()},[]);const p=d=>{d.preventDefault(),n(!0);let h={query:`mutation ($data: NewStudent!){
        createStudent(input: $data)
      }`,variables:{data:r}};new z().createOrUpdate(h).then(S=>{S.status===200?(Y({text:"Student saved successfully"}),s(!0)):j({text:S.message})}).finally(()=>{n(!1)})},x=()=>{s(!1),o(Ft)};return l?e(re,{sx:{px:5,pt:2,pb:5},children:t("div",{className:"py-5",children:[e("div",{className:"d-flex justify-content-center my-5",children:e(he,{severity:"success",children:"Student created successfully"})}),e("div",{className:"d-flex justify-content-center",children:e(q,{variant:"contained",color:"secondary",size:"large",onClick:x,children:"Add New Student"})})]})}):t(re,{sx:{px:5,pt:2,pb:5},className:"col-md-10 mx-auto",children:[t("div",{className:"d-flex my-3",children:[e(q,{variant:"outlined",color:"secondary",children:e(Zt,{})}),t("div",{className:"ms-4",children:[e("h3",{className:"p-0 m-0",children:"New Student"}),e("p",{className:"text-secondary m-0",children:"create new student profile."})]})]}),t("form",{onSubmit:p,method:"post",children:[t(C,{className:"row",children:[e(C,{className:"col-8",sx:{mt:4},children:e($,{type:"text",label:"Full name",required:!0,value:r.fullName,fullWidth:!0,onChange:d=>o(g(u({},r),{fullName:d.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,children:[e(V,{id:"gender-label",children:"Gender"}),e(Z,{labelId:"gender-label",id:"gender",label:"Gender",required:!0,value:r.gender,onChange:d=>o(g(u({},r),{gender:d.target.value})),children:Qe.map(d=>e(G,{value:d,children:d},d))})]})}),e(C,{className:"col-md-4",sx:{mt:4},children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Date of birth",inputFormat:"DD/MM/yyyy",value:r.dateOfBirth,onChange:d=>o(g(u({},r),{dateOfBirth:d})),renderInput:d=>e($,u({fullWidth:!0},d))})})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"Admission Number",required:!0,value:r.admissionNumber,fullWidth:!0,onChange:d=>o(g(u({},r),{admissionNumber:d.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"NEMIS",required:!0,value:r.nationalID,fullWidth:!0,onChange:d=>o(g(u({},r),{nationalID:d.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Date of admission",inputFormat:"DD/MM/yyyy",value:r.dateOfAdmission,onChange:d=>o(g(u({},r),{dateOfAdmission:d})),renderInput:d=>e($,u({fullWidth:!0},d))})})}),e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,children:[e(V,{id:"role-label",children:"Classroom"}),e(Z,{labelId:"role-label",id:"role",label:"Classroom",value:r.classID,required:!0,fullWidth:!0,onChange:d=>o(g(u({},r),{classID:d.target.value})),children:v.map(d=>t(G,{value:d.id,children:[d.level," ",d.stream]},d.id))})]})}),e("div",{className:"col-12 mt-4",children:e($,{type:"text",label:"Home address",required:!0,multiline:!0,rows:4,value:r.homeAddress,placeholder:`Iris Watson
P.O. Box 283 8562 Fusce Rd.
Frederick Nebraska 20620
(372) 587-2335`,fullWidth:!0,onChange:d=>o(g(u({},r),{homeAddress:d.target.value}))})})]}),e(ae,{}),e(C,{sx:{mt:4},children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:a,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})]})]})},yl=[{name:"#REG",selector:a=>a.reg},{name:"Name",selector:a=>a.fullName},{name:"Relationship",selector:a=>a.relationship},{name:"Class",selector:a=>a.classroom}],xl=a=>{const n=ne(),[l,s]=b.exports.useState(null),[r,o]=b.exports.useState(!1),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(""),[x,d]=b.exports.useState(0),h=(m,P)=>{d(P)},S=m=>{m.preventDefault(),o(!0);let P={query:`query ($data: ID!){
        parent: getParentByIDNumber(id: $data) {
          id
          fullName
          gender
          idNumber
          mobile
          email
          occupation
          children{
            id
            fullName
            relationship
            admissionNumber
            classroom
          }
        }
      }`,variables:{data:i}};new z().getData(P).then(w=>{s((w==null?void 0:w.parent)||null),o(!1),f(!0),setTimeout(()=>{f(!1)},5e3)})},N=()=>{p(""),s(null),o(!1),f(!1)},y=m=>{n.push(`/students/profile/${m.id}`)};return t(M,{children:[r&&t(re,{sx:{px:5,py:2},children:[" ",e(L,{})]}),(!r&&!v&&!l||v&&!l)&&e(re,{sx:{px:5,py:2},children:e(C,{sx:{display:"flex",py:5,justifyContent:"center"},children:e("form",{onSubmit:S,method:"post",children:t(E,{direction:"column",spacing:3,children:[e("div",{children:e($,{type:"text",label:"Search By ID Number",required:!0,value:i,placeholder:"Enter ID Number",color:"secondary",fullWidth:!0,onChange:m=>p(m.target.value)})}),v&&!l&&e(he,{severity:"warning",children:"Parent not found"}),e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:r,loadingPosition:"start",startIcon:e(Ea,{}),children:"Search"})]})})})}),l&&t(M,{children:[e(C,{sx:{my:3,display:"flex",justifyContent:"end"},children:e(q,{color:"secondary",variant:"contained",className:"no-transform",onClick:N,children:t(D,{children:[e("i",{className:"fa fa-search"}),"  Find another parent"]})})}),t(ue,{children:[t(C,{sx:{p:3,display:"flex"},children:[e(E,{children:e(te,{variant:"rounded",sx:{width:"10rem",height:"10rem"}})}),e(C,{sx:{display:"flex"},children:t(E,{spacing:1.5,sx:{ml:5,alignItems:"start"},children:[t(D,{fontWeight:700,children:[l.fullName,e(D,{fontWeight:300,sx:{fontSize:".8rem"},color:"text.secondary",children:l.email})]}),t(D,{variant:"body2",color:"text.secondary",children:[e(He,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",l.gender]}),t(D,{variant:"body2",color:"text.secondary",children:[e(Jt,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",l.mobile]}),t(D,{variant:"body2",color:"text.secondary",children:[e(Oa,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",l.idNumber]}),t(D,{variant:"body2",color:"text.secondary",children:[e(Fa,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",l.occupation]})]})})]}),e(ae,{}),t(C,{sx:{width:"100%"},children:[e(Xe,{sx:{borderBottom:"1px solid #e8e8e8"},value:x,onChange:h,textColor:"secondary",indicatorColor:"secondary",children:e(ce,u({icon:e(Ra,{sx:{fontSize:20}}),iconPosition:"start",label:"Children"},de(0)))}),e(se,{value:x,index:0,children:e(me,{progressPending:r,columns:yl,onRowClicked:y,paginationPerPage:3,paginationRowsPerPageOptions:[3,5],data:((l==null?void 0:l.children)||[]).map(m=>({id:m.id,reg:m.admissionNumber,fullName:m.fullName,relationship:m.relationship,classroom:m.classroom}))})})]})]})]})]})};class ua{constructor(){we(this,"uploadStudentPassPort",async(n,l)=>{let s=Ee();const r={headers:g(u({},s),{"Content-Type":"multipart/form-data"}),onUploadProgress:l};return Ne.post(Ce.STUDENT_PASSPORT,n,r).then(o=>{if(o.status===200)return{status:o.status,message:o.data}}).catch(o=>({message:"upload failed"}))});we(this,"uploadTeacherPassPort",async(n,l)=>{let s=Ee();const r={headers:g(u({},s),{"Content-Type":"multipart/form-data"}),onUploadProgress:l};return Ne.post(Ce.STAFF_PASSPORT,n,r).then(o=>{if(o.status===200)return{status:o.status,message:o.data}}).catch(o=>({message:"upload failed"}))});we(this,"uploadBookCover",async(n,l)=>{let s=Ee();const r={headers:g(u({},s),{"Content-Type":"multipart/form-data"}),onUploadProgress:l};return Ne.post(Ce.BOOK_COVER,n,r).then(o=>{if(o.status===200)return{status:o.status,message:o.data}}).catch(o=>({message:"upload failed"}))})}}const Rt={fullName:"",gender:"",email:"",mobile:"",occupation:"",idNumber:"",relationship:""},vl=a=>{const{studentID:n}=a,[l,s]=b.exports.useState(!1),[r,o]=b.exports.useState(!0),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(null),[x,d]=b.exports.useState(null),[h,S]=b.exports.useState(!1),[N,y]=b.exports.useState(0),[m,P]=b.exports.useState([]),[w,W]=b.exports.useState(Rt);b.exports.useEffect(()=>{o(!0);let k={query:`query ($studentID: ID!){
        parents: getParents(studentID: $studentID){
          id
          fullName
          gender
          idNumber
          mobile
          email
          occupation
          children {
            id
            fullName
            classroom
            admissionNumber
            relationship
          }
        }
      }`,variables:{studentID:n}};new z().getData(k).then(X=>{P((X==null?void 0:X.parents)||[]),o(!1)})},[n,N]);const _=()=>s(!l),c=()=>{W(Rt),d(!1),S(!1),p(null),_()},I=k=>{k.preventDefault(),f(!0);let X=i?{query:`mutation ($data: OldParent!){
        updateParent(input: $data)
      }`,variables:{data:g(u({},w),{studentID:n,id:i})}}:{query:`mutation ($data: NewParent!){
        createParent(input: $data)
      }`,variables:{data:g(u({},w),{studentID:n})}};new z().createOrUpdate(X).then(R=>{R.status===200?(Y({text:"Parent saved successfully"}),_(),y(N+1)):j({text:R.message})}).finally(()=>{f(!1)})},B=k=>{S(!0),d(!1),p(k.id),_();let X={query:`query ($parentID: ID!){
        parent: getParentByID( id: $parentID){
          id
          fullName
          gender
          idNumber
          mobile
          email
          occupation
          children{
            id
            fullName
            relationship
          }
        }
      }`,variables:{studentID:n,parentID:k.id}};new z().getData(X).then(R=>{var T,K;if(R){let qe=R.parent;W(g(u({},w),{fullName:qe.fullName,gender:qe.gender,email:qe.email,mobile:qe.mobile,occupation:qe.occupation,idNumber:qe.idNumber,relationship:(K=(T=qe.children)==null?void 0:T.filter(ma=>ma.id===n)[0])==null?void 0:K.relationship}))}}).finally(()=>{S(!1),d(!0)})},O=k=>{Pe({title:"Delete parent!"}).then(X=>{if(X.isConfirmed){let R={query:`mutation ($studentID: ID!, $parentID: ID!){
            deleteParent(studentID: $studentID, parentID: $parentID)
          }`,variables:{studentID:n,parentID:k.id}};new z().delete(R).then(T=>{T.status===200?(Y("Parent deleted successfully"),y(N-1)):j({text:T.message})})}else X.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, parent not deleted"})})},ve=k=>{k.preventDefault(),S(!0);let X={query:`query ($data: ID!){
        parent: getParentByIDNumber(id: $data){
          id
          fullName
          gender
          idNumber
          mobile
          email
          occupation
        }
      }`,variables:{data:w.idNumber}};new z().getData(X).then(R=>{R.parent&&W(g(u({},w),{fullName:R==null?void 0:R.parent.fullName,gender:R==null?void 0:R.parent.gender,email:R==null?void 0:R.parent.email,mobile:R==null?void 0:R.parent.mobile,occupation:R==null?void 0:R.parent.occupation,idNumber:R==null?void 0:R.parent.idNumber})),S(!1),d(!0)})};let De=[{title:"Edit",action:B,icon:e(pe,{fontSize:"small"})},{title:"Delete",action:O,icon:e(Ue,{fontSize:"small",color:"red"})}];return t(M,{children:[e(q,{variant:"contained",color:"secondary",onClick:c,children:"Add Parent"}),e(me,{progressPending:r,columns:[{name:"Name",selector:k=>k.fullName},{name:"Relationship",selector:k=>k.relationship},{name:"Mobile",selector:k=>k.mobile},{name:"Email",selector:k=>k.email},{selector:k=>k.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}],onRowClicked:B,data:m.map(k=>{var X,R;return{id:k.id,fullName:k.fullName,relationship:(R=(X=k.children)==null?void 0:X.filter(T=>T.id===n)[0])==null?void 0:R.relationship,mobile:k.mobile,email:k.email,occupation:k.occupation,action:e(Be,{options:De,row:k})}})}),t(Te,{isOpen:l,children:[h&&t(M,{children:[e(fe,{toggle:_,children:"Searching parent ..."}),e(ee,{children:e(L,{})})]}),!h&&!x&&!i&&t(M,{children:[t(fe,{toggle:_,children:[e("i",{className:"fa fa-plus-circle"})," Add parent"]}),e(ee,{children:e("form",{onSubmit:ve,method:"post",children:t("div",{children:[e("div",{className:"mt-3",children:e($,{value:w.idNumber,label:"Parent's ID Number",required:!0,color:"secondary",fullWidth:!0,onChange:k=>W(g(u({},w),{idNumber:k.target.value}))})}),e("div",{className:"my-5",children:e(q,{color:"secondary",variant:"contained",type:"submit",children:"Continue"})})]})})})]}),(x||x&&i)&&e(M,{children:t("form",{onSubmit:I,method:"post",children:[e(fe,{toggle:_,children:i?"Edit details":"Add parent"}),e(ee,{children:t("div",{className:"row px-3",children:[e("div",{className:"mt-3",children:e($,{value:w.fullName,label:"Parent name",required:!0,color:"secondary",fullWidth:!0,onChange:k=>W(g(u({},w),{fullName:k.target.value}))})}),e("div",{className:"mt-3",children:t(Q,{children:[e(bt,{id:"gender-radio-buttons-group-label",children:"Gender"}),e(gt,{row:!0,"aria-labelledby":"gender-radio-buttons-group-label",name:"gender-radio-buttons-group",value:w.gender,onChange:k=>W(g(u({},w),{gender:k.target.value})),children:Qe.map(k=>e(yt,{value:k,control:e(xt,{color:"secondary",required:!0}),label:k},k))})]})}),e("div",{className:"mt-3",children:t(Q,{fullWidth:!0,children:[e(V,{id:"relationship-label",children:"Relationship"}),e(Z,{labelId:"relationship-label",id:"relationship",label:"Relationship",value:w.relationship,required:!0,fullWidth:!0,onChange:k=>W(g(u({},w),{relationship:k.target.value})),children:hl[w.gender].map(k=>e(G,{value:k,children:k},k))})]})}),e("div",{className:"col-6 mt-3",children:e($,{value:w.mobile,label:"Phone number",required:!0,color:"secondary",fullWidth:!0,onChange:k=>W(g(u({},w),{mobile:k.target.value}))})}),e("div",{className:"col-6 mt-3",children:e($,{value:w.idNumber,label:"ID Number",required:!0,color:"secondary",fullWidth:!0,onChange:k=>W(g(u({},w),{idNumber:k.target.value}))})}),e("div",{className:"mt-3",children:e($,{type:"email",value:w.email,label:"Email",color:"secondary",fullWidth:!0,onChange:k=>W(g(u({},w),{email:k.target.value}))})}),e("div",{className:"mt-3",children:e($,{value:w.occupation,label:"Occupation",required:!0,color:"secondary",fullWidth:!0,onChange:k=>W(g(u({},w),{occupation:k.target.value}))})})]})}),e(Ye,{children:e("div",{className:"col-12 d-flex justify-content-start ps-4",children:e(J,{type:"submit",variant:"contained",color:"secondary",size:"large",loading:v,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})})]})})]})]})},Nl=a=>{const{uid:n}=Re(),l=ne(),[s,r]=b.exports.useState(!1),[o,v]=b.exports.useState(Ze),[f,i]=b.exports.useState(0),[p,x]=b.exports.useState(!1),[d,h]=b.exports.useState(!0),[S,N]=b.exports.useState(0),[y,m]=b.exports.useState(aa),P=(c,I)=>{N(I)};b.exports.useEffect(()=>{let c={query:`
        query($id:ID!){
          student: getStudent(id:$id){
            id
            fullName
            dateOfBirth
            dateOfAdmission
            gender
            admissionNumber
            nationalID
            passport
            age
            active
            homeAddress
            classroom{
              level
              stream
            }
          }
        }
      `,variables:{id:n}};new z().getData(c).then(I=>{r((I==null?void 0:I.student)||null),v(g(u({},Ze),{url:I==null?void 0:I.student.passport})),h(!1)})},[n]);const w=c=>{var I=window._protected_reference=document.createElement("INPUT");I.type="file",I.accept="image/*",I.addEventListener("change",B=>{window._protected_reference=null,I.files.length&&v({url:URL.createObjectURL(I.files[0]),isNew:!0,image:I.files[0]})}),I.click()},W=c=>{if(o.image){x(!0);let I=new FormData;I.append("id",s.id),I.append("file",o.image),new ua().uploadStudentPassPort(I,B=>{const{loaded:O,total:ve}=B;let De=Math.floor(O*100/ve);i(De)}).then(B=>{(B==null?void 0:B.status)===200?(v(g(u({},o),{isNew:!1})),m({open:!0,message:"Photo uploaded successfully",severity:"success"})):m({open:!0,message:"Photo uploaded failed",severity:"error"})}).finally(()=>{x(!1),i(0)})}},_=()=>{m(g(u({},y),{open:!1}))};return d?e(L,{}):s?t(M,{children:[e(ra,g(u({},y),{onClose:_})),t(ue,{children:[t(C,{sx:{p:3,display:"flex"},children:[t(E,{children:[t("div",{style:{position:"relative"},children:[e(te,{variant:"rounded",src:o.url,alt:s.fullName,sx:{width:"10rem",height:"10rem",mb:1,cursor:"pointer"},onClick:w,children:e(et,{sx:{fontSize:"8rem"}})}),p&&e(te,{variant:"rounded",sx:{position:"absolute",width:"10rem",height:"10rem",top:0,left:0,bgcolor:"#555555e2"},children:e(Xt,{variant:"determinate",value:f,color:"secondary",style:{width:"7rem",height:"7rem"}})})]}),o.isNew&&!p&&e(J,{type:"submit",variant:"contained",color:"secondary",loading:p,onClick:W,children:"Upload"})]}),t(C,{children:[t(C,{sx:{display:"flex"},children:[t(E,{spacing:1.5,sx:{ml:5,alignItems:"start"},children:[e(D,{fontWeight:700,children:s.fullName}),t(D,{variant:"body2",color:"text.secondary",children:[e(ft,{sx:{fontSize:"1.2rem"},color:"secondary"})," ",s.classroom.level," ",s.classroom.stream]}),t(D,{variant:"body2",color:"text.secondary",children:[e(He,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",s.gender]}),t(D,{variant:"body2",color:"text.secondary",children:[e(tt,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",s.age," yrs old"]}),t(D,{variant:"body2",color:"text.secondary",children:[e(Ht,{sx:{fontSize:"1.2rem"},color:s.active?"success":"disabled"}),"  ",s.active?"Active":"Not active"]})]}),t(E,{spacing:3,sx:{ml:{md:5,lg:20}},children:[t(E,{direction:"column",children:[e(D,{variant:"body2",color:"text.secondary",children:"Examination "}),e(Le,{precision:.5,name:"read-only",value:4.5,readOnly:!0,size:"large",icon:e(ut,{}),emptyIcon:e(Ma,{})})]}),t(E,{direction:"column",children:[e(D,{variant:"body2",color:"text.secondary",children:"Discipline "}),e(Le,{precision:.5,name:"read-only",value:1,readOnly:!0,size:"large",icon:e(It,{}),emptyIcon:e(Wa,{})})]})]})]}),t(E,{spacing:3,sx:{ml:5,mt:3},direction:"row",children:[t(q,{variant:"contained",color:"secondary",onClick:()=>{l.push(`/students/profile/${s.id}/edit`)},children:[e(pe,{})," ",e(D,{sx:{ml:1},children:"Edit"})]}),t(q,{variant:"outlined",color:"secondary",onClick:()=>{l.push("/students")},children:[e(za,{})," ",e(D,{sx:{ml:1},children:"Back"})]})]})]})]}),e(ae,{}),t(C,{sx:{width:"100%"},children:[t(Xe,{sx:{borderBottom:"1px solid #e8e8e8"},value:S,onChange:P,textColor:"secondary",indicatorColor:"secondary",children:[e(ce,u({icon:e(La,{sx:{fontSize:20}}),iconPosition:"start",label:"Address"},de(0))),e(ce,u({icon:e(Zt,{sx:{fontSize:20}}),iconPosition:"start",label:"Parents"},de(1))),e(ce,u({icon:e(ut,{sx:{fontSize:20}}),iconPosition:"start",label:"Subjects"},de(2))),e(ce,u({icon:e(Ua,{sx:{fontSize:20}}),iconPosition:"start",label:"Exams"},de(3))),e(ce,u({icon:e(ja,{sx:{fontSize:20}}),iconPosition:"start",label:"Invoices"},de(4))),e(ce,u({icon:e(It,{sx:{fontSize:20}}),iconPosition:"start",label:"Awards"},de(5))),e(ce,u({icon:e(_a,{sx:{fontSize:20}}),iconPosition:"start",label:"Discipline"},de(6)))]}),e(se,{value:S,index:0,children:e("div",{children:e("pre",{children:s.homeAddress})})}),e(se,{value:S,index:1,children:e(vl,{studentID:n})}),e(se,{value:S,index:2,children:e(C,{children:e(q,{variant:"contained",color:"secondary",children:"Add Subject"})})}),e(se,{value:S,index:3,children:"Exams"}),e(se,{value:S,index:4,children:"Invoices"}),e(se,{value:S,index:5,children:e(C,{children:e(q,{variant:"contained",color:"secondary",children:"Create Award"})})}),e(se,{value:S,index:6,children:e(C,{children:e(q,{variant:"contained",color:"secondary",children:"Add Case"})})})]})]})]}):e(re,{sx:{px:5,py:2},children:e("div",{className:"py-5 d-flex justify-content-center",children:e(he,{severity:"warning",children:"Student not found"})})})},Sl=[{title:"All students",href:"/students",icon:"bx bxs-group",exact:!0},{title:"Add New Student",href:"/students/new",icon:"bx bx-plus-medical"},{title:"Find a parent",href:"/students/parents",icon:"bx bx-male"}];function Cl(){return e(F,{path:"/students",render:({match:{url:a}})=>t(M,{children:[e(F,{path:a,component:ml,exact:!0}),e(F,{path:`${a}/parents`,component:xl}),e(F,{path:`${a}/new`,component:gl}),e(F,{path:`${a}/profile/:uid`,component:Nl,exact:!0}),e(F,{path:`${a}/profile/:uid/edit`,component:bl})]})})}function Dl(){return t("div",{children:[e(xe,{titleName:"Students",titleIcon:"bx bx-group",items:Sl}),e(oe,{children:e(Cl,{})})]})}const wl=H`
query{
  teachers: getTeachers{
    id
    serialNumber
    title
    fullName
    employer
    gender
    passport
  }
}
`,Il=()=>{const a=ne(),{data:n,loading:l,error:s,refetch:r}=le(wl),o=d=>{Pe({title:"Delete teacher!"}).then(h=>{if(h.isConfirmed){let S={query:`mutation deleteTeacher($id: ID!){
            deleteTeacher(id: $id)
          }`,variables:{id:d.id}};new z().delete(S).then(N=>{N.status===200?Y({text:"Teacher deleted successfully"}):j({text:N.message})}).finally(()=>{r()})}else h.isDismissed&&ye({title:"Cancelled",text:"Request cancelled, teacher not deleted"})})},v=d=>{a.push(`/teachers/profile/${d.id}`)},f=d=>{a.push(`/teachers/profile/${d.id}/edit`)},i=()=>{a.push("/teachers/new")};let p=[{title:"Open",action:v,icon:e(Kt,{fontSize:"small",color:"secondary"})},{title:"Edit",action:f,icon:e(pe,{fontSize:"small",color:"success"})},{title:"Delete",action:o,icon:e(Vt,{fontSize:"small",color:"error"})}];const x=[{name:"",selector:d=>d.photo,width:"70px"},{name:"#",selector:d=>d.serialNumber,sortable:!0,width:"80px"},{name:"Name",selector:d=>d.name,sortable:!0},{name:"Employer",selector:d=>d.employer,sortable:!0},{name:"Gender",selector:d=>d.gender,sortable:!0,width:"150px"},{selector:d=>d.action,style:{color:"grey"},allowOverflow:!0,button:!0,width:"56px"}];return l?e(L,{}):s?e(ie,{message:s.message}):t(M,{children:[e(C,{sx:{my:3,display:"flex",justifyContent:"end"},children:t(q,{color:"secondary",variant:"contained",className:"no-transform",onClick:i,children:[e(Fe,{})," Add New Teacher"]})}),e(me,{defaultSortFieldId:2,progressPending:l,onRowClicked:v,columns:x,data:n.teachers.map(d=>({id:d.id,photo:e(Nt,{src:d.passport,alt:d.title}),serialNumber:d.serialNumber,name:`${d.title} ${d.fullName}`,employer:d.employer,gender:d.gender,action:e(Be,{options:p,row:d})}))})]})},Mt={title:"",fullName:"",dateOfBirth:new Date("2002-01-01T00:00:00"),gender:"",idNumber:"",phoneNumber:"",email:"",serialNumber:"",employer:"",employmentNumber:""},kl=()=>{const a=ne(),{uid:n}=Re(),[l,s]=b.exports.useState(!0),[r,o]=b.exports.useState(!1),[v,f]=b.exports.useState(!1),[i,p]=b.exports.useState(Mt);b.exports.useEffect(()=>{let h={query:`query($id: ID!){
        teacher: getTeacher(id:$id){
          title
          fullName
          gender
          dateOfBirth
          idNumber
          email
          phoneNumber
          serialNumber
          employer
          employmentNumber
          passport
        }
      }`,variables:{id:n}};new z().getData(h).then(S=>{p(u(u({},Mt),S==null?void 0:S.teacher)),s(!1)})},[n]);const x=h=>{h.preventDefault(),o(!0),delete i.passport;let S={query:`mutation ($id: ID!, $data: NewTeacher!){
        updateTeacher(id: $id, input: $data)
      }`,variables:{id:n,data:i}};new z().createOrUpdate(S).then(N=>{N.status===200?(Y({text:"Teacher saved successfully"}),f(!0)):j({text:N.message})}).finally(()=>{o(!1)})},d=()=>{a.push(`/teachers/profile/${n}`)};return l?e(re,{sx:{px:5,py:2},className:"col-md-8 mx-auto",children:e(L,{})}):v?e(re,{sx:{px:5,py:2},className:"col-md-8 mx-auto",children:t("div",{className:"py-5",children:[e("div",{className:"d-flex justify-content-center my-5",children:e(he,{severity:"success",children:"Teacher details updated successfully"})}),e("div",{className:"d-flex justify-content-center",children:e(q,{variant:"contained",color:"secondary",onClick:d,children:"Go to Teacher Profile"})})]})}):t(re,{sx:{px:5,py:2},className:"col-md-10 mx-auto",children:[t("div",{className:"d-flex my-3",children:[e(te,{src:i.passport,alt:i.fullName,sx:{width:"4rem",height:"4rem"}}),t("div",{className:"ms-4",children:[e("h3",{className:"p-0 m-0",children:"Edit Teacher"}),e("p",{className:"text-secondary m-0",children:"Edit the employee profile."})]})]}),t("form",{onSubmit:x,method:"post",children:[t(C,{className:"row",children:[e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,size:"small",children:[e(V,{id:"teacher-title",children:"Title"}),e(Z,{labelId:"teacher-title",id:"title",label:"Title",value:i.title,required:!0,fullWidth:!0,onChange:h=>p(g(u({},i),{title:h.target.value})),children:ca.map(h=>e(G,{value:h,children:h},h))})]})}),e(C,{className:"col-md-8",sx:{mt:4},children:e($,{type:"text",label:"Full name",required:!0,value:i.fullName,fullWidth:!0,size:"small",onChange:h=>p(g(u({},i),{fullName:h.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e($,{type:"text",label:"Mobile",required:!0,value:i.phoneNumber,fullWidth:!0,size:"small",onChange:h=>p(g(u({},i),{phoneNumber:h.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e($,{type:"email",label:"Email",required:!0,value:i.email,fullWidth:!0,size:"small",onChange:h=>p(g(u({},i),{email:h.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e($,{type:"text",label:"ID Number",required:!0,value:i.idNumber,fullWidth:!0,size:"small",onChange:h=>p(g(u({},i),{idNumber:h.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Date of birth",inputFormat:"DD/MM/yyyy",value:i.dateOfBirth,onChange:h=>p(g(u({},i),{dateOfBirth:h})),renderInput:h=>e($,g(u({fullWidth:!0},h),{size:"small"}))})})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"Staff Number",required:!0,size:"small",value:i.serialNumber,placeholder:"e.g 001",fullWidth:!0,onChange:h=>p(g(u({},i),{serialNumber:h.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,size:"small",children:[e(V,{id:"employer-label",children:"Employer"}),e(Z,{labelId:"employer-label",id:"employer",label:"Employer",value:i.employer,required:!0,fullWidth:!0,onChange:h=>p(g(u({},i),{employer:h.target.value})),children:da.map(h=>e(G,{value:h,children:h},h))})]})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"Empl. Number",required:!0,size:"small",value:i.employmentNumber,placeholder:"e.g T.S.C Number",fullWidth:!0,onChange:h=>p(g(u({},i),{employmentNumber:h.target.value}))})}),e(C,{sx:{mt:4},children:t(Q,{size:"small",children:[e(bt,{id:"gender-radio-buttons-group-label",children:"Gender"}),e(gt,{row:!0,"aria-labelledby":"gender-radio-buttons-group-label",name:"gender-radio-buttons-group",value:i.gender,onChange:h=>p(g(u({},i),{gender:h.target.value})),children:Qe.map(h=>e(yt,{value:h,control:e(xt,{color:"secondary"}),label:h},h))})]})})]}),e(ae,{}),t(E,{spacing:3,sx:{mt:4},direction:"row",children:[e(J,{type:"submit",variant:"contained",color:"secondary",loading:r,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"}),t(q,{variant:"outlined",color:"secondary",type:"button",onClick:d,children:[e(at,{sx:{mr:1}})," Cancel"]})]})]})]})},Wt={title:"",fullName:"",dateOfBirth:new Date("2002-01-01T00:00:00"),gender:"",idNumber:"",phoneNumber:"",email:"",serialNumber:"",employer:"",employmentNumber:""},$l=()=>{const[a,n]=b.exports.useState(!1),[l,s]=b.exports.useState(!1),[r,o]=b.exports.useState(Wt),v=i=>{i.preventDefault(),n(!0);let p={query:`mutation($data: NewTeacher!){
        createTeacher(input: $data)
      }`,variables:{data:r}};new z().createOrUpdate(p).then(x=>{x.status===200?(Y({text:"Teacher saved successfully"}),s(!0)):j({text:x.message})}).finally(()=>{n(!1)})},f=()=>{s(!1),o(Wt)};return l?e(re,{sx:{px:5,py:2},children:t("div",{className:"py-5",children:[e("div",{className:"d-flex justify-content-center my-5",children:e(he,{severity:"success",children:"Teacher created successfully"})}),e("div",{className:"d-flex justify-content-center",children:e(q,{variant:"contained",color:"secondary",size:"large",onClick:f,children:"Add New Teacher"})})]})}):t(re,{sx:{px:5,py:2},className:"col-md-10 mx-auto",children:[t("div",{className:"d-flex my-3",children:[e(q,{variant:"outlined",color:"secondary",children:e(pe,{})}),t("div",{className:"ms-4",children:[e("h3",{className:"p-0 m-0",children:"Create Teacher"}),e("p",{className:"text-secondary m-0",children:"create employee profile."})]})]}),t("form",{onSubmit:v,method:"post",children:[t(C,{className:"row",children:[e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,size:"small",children:[e(V,{id:"teacher-title",children:"Title"}),e(Z,{labelId:"teacher-title",id:"title",label:"Title",value:r.title,required:!0,fullWidth:!0,onChange:i=>o(g(u({},r),{title:i.target.value})),children:ca.map(i=>e(G,{value:i,children:i},i))})]})}),e(C,{className:"col-md-8",sx:{mt:4},children:e($,{type:"text",label:"Full name",required:!0,value:r.fullName,fullWidth:!0,size:"small",onChange:i=>o(g(u({},r),{fullName:i.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e($,{type:"text",label:"Mobile",required:!0,value:r.phoneNumber,fullWidth:!0,size:"small",onChange:i=>o(g(u({},r),{phoneNumber:i.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e($,{type:"email",label:"Email",required:!0,value:r.email,fullWidth:!0,size:"small",onChange:i=>o(g(u({},r),{email:i.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e($,{type:"text",label:"ID Number",required:!0,value:r.idNumber,fullWidth:!0,size:"small",onChange:i=>o(g(u({},r),{idNumber:i.target.value}))})}),e(C,{className:"col-md-6",sx:{mt:4},children:e(Ie,{dateAdapter:ke,children:e($e,{label:"Date of birth",inputFormat:"DD/MM/yyyy",value:r.dateOfBirth,onChange:i=>o(g(u({},r),{dateOfBirth:i})),renderInput:i=>e($,g(u({fullWidth:!0},i),{size:"small"}))})})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"Staff Number",required:!0,size:"small",value:r.serialNumber,placeholder:"e.g 001",fullWidth:!0,onChange:i=>o(g(u({},r),{serialNumber:i.target.value}))})}),e(C,{className:"col-md-4",sx:{mt:4},children:t(Q,{fullWidth:!0,size:"small",children:[e(V,{id:"employer-label",children:"Employer"}),e(Z,{labelId:"employer-label",id:"employer",label:"Employer",value:r.employer,required:!0,fullWidth:!0,onChange:i=>o(g(u({},r),{employer:i.target.value})),children:da.map(i=>e(G,{value:i,children:i},i))})]})}),e(C,{className:"col-md-4",sx:{mt:4},children:e($,{type:"text",label:"Empl. Number",required:!0,size:"small",value:r.employmentNumber,placeholder:"e.g T.S.C Number",fullWidth:!0,onChange:i=>o(g(u({},r),{employmentNumber:i.target.value}))})}),e(C,{sx:{mt:4},children:t(Q,{size:"small",children:[e(bt,{id:"gender-radio-buttons-group-label",children:"Gender"}),e(gt,{row:!0,"aria-labelledby":"gender-radio-buttons-group-label",name:"gender-radio-buttons-group",value:r.gender,onChange:i=>o(g(u({},r),{gender:i.target.value})),children:Qe.map(i=>e(yt,{value:i,control:e(xt,{color:"secondary"}),label:i},i))})]})})]}),e(ae,{}),e(C,{sx:{mt:4},children:e(J,{type:"submit",variant:"contained",color:"secondary",loading:a,loadingPosition:"start",startIcon:e(ge,{}),children:"Save"})})]})]})},Tl=a=>{const{uid:n}=Re(),l=ne(),[s,r]=b.exports.useState(!1),[o,v]=b.exports.useState(Ze),[f,i]=b.exports.useState(0),[p,x]=b.exports.useState(!1),[d,h]=b.exports.useState(!0),[S,N]=b.exports.useState(0),[y,m]=b.exports.useState(aa),P=(c,I)=>{N(I)};b.exports.useEffect(()=>{let c={query:`
        query($id:ID!){
          teacher: getTeacher(id:$id){
            id
            title
            fullName
            gender
            dateOfBirth
            idNumber
            email
            phoneNumber
            serialNumber
            employer
            employmentNumber
            passport
            age
          }
        }
      `,variables:{id:n}};new z().getData(c).then(I=>{r(I==null?void 0:I.teacher),v(g(u({},Ze),{url:I==null?void 0:I.teacher.passport})),h(!1)})},[n]);const w=c=>{var I=window._protected_reference=document.createElement("INPUT");I.type="file",I.accept="image/*",I.addEventListener("change",B=>{window._protected_reference=null,I.files.length&&v({url:URL.createObjectURL(I.files[0]),isNew:!0,image:I.files[0]})}),I.click()},W=c=>{if(o.image){x(!0);let I=new FormData;I.append("id",s.id),I.append("file",o.image),new ua().uploadTeacherPassPort(I,B=>{const{loaded:O,total:ve}=B;let De=Math.floor(O*100/ve);i(De)}).then(B=>{(B==null?void 0:B.status)===200?(v(g(u({},o),{isNew:!1})),m({open:!0,message:"Photo uploaded successfully",severity:"success"})):m({open:!0,message:"Photo uploaded failed",severity:"error"})}).finally(()=>{x(!1),i(0)})}},_=()=>{m(g(u({},y),{open:!1}))};return d?e(L,{}):s?t(M,{children:[e(ra,g(u({},y),{onClose:_})),t(ue,{children:[t(C,{sx:{p:3,display:"flex"},children:[t(E,{children:[t("div",{style:{position:"relative"},children:[e(te,{variant:"rounded",src:o.url,alt:s.fullName,sx:{width:"10rem",height:"10rem",mb:1,cursor:"pointer"},onClick:w,children:e(et,{sx:{fontSize:"8rem"}})}),p&&e(te,{variant:"rounded",sx:{position:"absolute",width:"10rem",height:"10rem",top:0,left:0,bgcolor:"#555555e2"},children:e(Xt,{variant:"determinate",value:f,color:"secondary",style:{width:"7rem",height:"7rem"}})})]}),o.isNew&&!p&&e(J,{type:"submit",variant:"contained",color:"secondary",loading:p,onClick:W,children:"Upload"})]}),t(C,{children:[t(C,{sx:{display:"flex"},children:[t(E,{spacing:2,sx:{ml:5,alignItems:"start"},children:[t(E,{direction:"column",spacing:0,children:[t(D,{fontWeight:700,children:[s.title," ",s.fullName]}),t(D,{variant:"body2",color:"text.secondary",children:[s.email," "]})]}),t(D,{variant:"body2",color:"text.secondary",children:[e(He,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",s.gender]}),t(D,{variant:"body2",color:"text.secondary",children:[e(tt,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",s.age," yrs old"]}),t(D,{variant:"body2",color:"text.secondary",children:[e(Jt,{sx:{fontSize:"1.2rem"},color:"secondary"}),"  ",s.phoneNumber]})]}),t(E,{spacing:3,sx:{ml:{md:5,lg:20}},children:[t(E,{direction:"column",spacing:1,children:[e(D,{variant:"body2",color:"text.secondary",children:"Employer "}),t(D,{variant:"body1",children:[s.employer," "]})]}),t(E,{direction:"column",spacing:1,children:[e(D,{variant:"body2",color:"text.secondary",children:"Employment Number"}),t(D,{variant:"body1",children:[s.employmentNumber," "]})]})]})]}),e(C,{sx:{ml:5,mt:3},children:t(q,{variant:"outlined",color:"secondary",onClick:()=>{l.push(`/teachers/profile/${s.id}/edit`)},children:[e(pe,{})," ",e(D,{sx:{ml:1},children:"Edit"})]})})]})]}),e(ae,{}),t(C,{sx:{width:"100%"},children:[t(Xe,{sx:{borderBottom:"1px solid #e8e8e8"},value:S,onChange:P,textColor:"secondary",indicatorColor:"secondary",children:[e(ce,u({icon:e(ut,{sx:{fontSize:20}}),iconPosition:"start",label:"Subjects"},de(0))),e(ce,u({icon:e(je,{sx:{fontSize:20}}),iconPosition:"start",label:"Classrooms"},de(1)))]}),e(se,{value:S,index:0,children:"Subjects"}),e(se,{value:S,index:1,children:"Classrooms"})]})]})]}):e(re,{sx:{px:5,py:2},children:e("div",{className:"py-5 d-flex justify-content-center",children:e(he,{severity:"warning",children:"Teacher not found"})})})},Pl=[{title:"All teacher",href:"/teachers",icon:"bx bxs-group",exact:!0},{title:"Add New Teacher",href:"/teachers/new",icon:"bx bx-plus-medical"}];function Bl(){return e(F,{path:"/teachers",render:({match:{url:a}})=>t(M,{children:[e(F,{path:a,component:Il,exact:!0}),e(F,{path:`${a}/new`,component:$l}),e(F,{path:`${a}/profile/:uid`,component:Tl,exact:!0}),e(F,{path:`${a}/profile/:uid/edit`,component:kl})]})})}function ql(){return t("div",{children:[e(xe,{titleName:"Teacher",titleIcon:"bx bx-user",items:Pl}),e(oe,{children:e(Bl,{})})]})}const Al=[{title:"Health",href:"/welfare/health",icon:"bx bxs-right-arrow"},{title:"G & C",href:"/welfare/guidance",icon:"bx bxs-right-arrow"}];function El(){return t(M,{children:[e(xe,{titleName:"Welfare",titleIcon:"bx bx-trophy",items:Al}),e(oe,{children:e(Me,{feature:"Welfare"})})]})}function Ol(a){const n=mt(v=>v.auth.user),l=ht(),[s,r]=b.exports.useState(!0);b.exports.useEffect(()=>{const v=()=>{let f=localStorage.getItem("token");f?er(f).then(i=>{i.status===200&&l(ta(i.data))}).catch(i=>{console.log(i)}).finally(()=>{r(!1)}):r(!1)};return v(),()=>{v()}},[l]);const o=new Ga({uri:`${vt}/query`,headers:{Authorization:n?`Bearer ${n.token}`:""},cache:new Ya});return s?e(L,{}):!s&&!n?e(vr,{}):e(Ha,{client:o,children:e(Qa,{children:e(Ka,{children:t(cr,{children:[e(F,{path:"/sms",component:cl}),e(F,{path:"/teachers",component:ql}),e(F,{path:"/classes",component:$r}),e(F,{path:"/students",component:Dl}),e(F,{path:"/examination",component:ur}),e(F,{path:"/finance",component:qr}),e(F,{path:"/library",component:nl}),e(F,{path:"/activity",component:hr}),e(F,{path:"/settings",component:ol}),e(F,{path:"/welfare",component:El}),e(F,{exact:!0,path:"/",component:Pr})]})})})})}var Fl=Va({reducer:{auth:rr}});Za.render(e(Ja,{store:Fl,children:e(Ol,{})}),document.getElementById("root"));
